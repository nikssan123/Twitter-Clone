{"version":3,"sources":["Images/warbler-logo.png","Images/default-profile-image.jpg","Store/Reducers/currentUser.js","Store/Reducers/messages.js","Store/actionTypes.js","Store/Reducers/user.js","Store/Reducers/users.js","Store/Reducers/notifications.js","Store/Reducers/toggle.js","Store/Reducers/index.js","Store/Reducers/errors.js","Services/api.js","Store/Actions/errors.js","Store/Actions/auth.js","Store/Actions/toggle.js","Containers/Navbar.js","Components/MessageItem.js","Components/Search.js","Containers/MessageList.js","Store/Actions/messages.js","Components/UserAside.js","Components/MessageTimeline.js","Components/Homepage.js","Components/AuthForm.js","Store/Actions/user.js","Hocs/withAuth.js","Containers/MessageForm.js","Containers/UserMessages.js","Components/UserShow.js","Components/Chat/ChatMessage.js","Components/Chat/ChatHeader.js","Components/Chat/ChatInput.js","Containers/Chat.js","Containers/Settings.js","Components/PasswordReset/Forgot.js","Components/PasswordReset/Reset.js","Components/Sidemenu.js","Containers/Main.js","Containers/App.js","Store/index.js","serviceWorker.js","index.js"],"names":["module","exports","DEFAULT_STATE","isAuthenticated","user","chatMessages","from","messages","following","message","state","action","type","filter","_id","id","defaultState","newMessages","users","notications","toggleSidemenu","toggle","rootReducer","combineReducers","currentUser","Boolean","Object","keys","length","newMessage","followers","errors","error","notifications","apiCall","method","path","data","Promise","resolve","reject","axios","toLowerCase","then","res","catch","err","response","addError","removeError","setCurrentUser","setAuthorizationToken","token","defaults","headers","common","setTokenHeader","logout","dispatch","localStorage","clear","Navbar","e","preventDefault","props","className","this","onClick","to","src","Logo","alt","React","Component","connect","MessageItem","date","profileImageUrl","text","username","removeMessage","isCorrectUser","linkToUser","style","display","DefaultProfileImg","height","width","format","theme","input","padding","border","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","outline","inputOpen","container","margin","suggestionsContainerOpen","backgroundColor","borderLeft","borderRight","borderBottom","color","suggestionsList","listStyleType","suggestion","cursor","suggestionHighlighted","Search","getSuggestions","value","searcher","search","trim","getSuggestionValue","renderSuggestion","redirect","borderRadius","marginRight","DefaultProfilePic","onChange","event","newValue","setState","onSuggestionsFetchRequested","suggestions","onSuggestionsClearRequested","history","push","FuzzySearch","caseSensitive","inputProps","placeholder","Messagelist","handleScroll","dummy","document","querySelector","window","scrollY","offsetTop","innerHeight","loadData","pageNumber","isLoading","hasMore","addEventListener","removeEventListener","removeMessages","fetchMessages","messageList","map","m","key","createAt","bind","justifyContent","marginTop","page","user_id","message_id","UserAside","useState","showModal","setShowModal","handleClose","u","listStyle","aria-hidden","paddingBottom","Modal","show","onHide","Header","closeButton","Title","Body","Footer","data-dismiss","MessageTimeline","MessageList","Homepage","AuthForm","email","password","handleChange","handleSubmit","target","name","authType","signUp","onAuth","heading","buttonText","listen","paddingTop","onSubmit","required","autoFocus","deleteNotification","withAuth","ComponentToBeRendered","socket","Authenticate","nextProps","MessageForm","handleNewMessage","postNewMessage","resize","rows","getState","UserMessage","_isMountedCheck","setInfoState","setTimeout","infoMessage","isFollowing","followersList","handleFollow","handleUnfollow","handleDeleteMessage","match","params","fetchUserInfo","forEach","followUser","newFollowersNum","unfollowUser","userId","messageId","deleteMessage","userFollowers","isSameUser","messagesList","reverse","createdAt","DefaultProfileImage","col1","fontSize","textAlign","UserShow","UserMessages","ChatMessage","created","momentStyle","fontWeight","fromNow","ChatHeader","ChatInput","onKeyUp","onEmojiClick","showEmoji","setShowEmoji","undefined","rightMargin","setRightMargin","bottomMargin","setBottomMargin","innerWidth","useEffect","flex","showPreview","title","emoji","position","bottom","right","float","onSelect","Chat","submitFunction","addMessageNotification","roomId","chat","emit","scrollTop","receiver","loadChat","handleEmojiClick","native","handleClick","host","location","protocol","hostname","io","info","on","received","chatRoom","loadedMessages","keyCode","pathname","split","i","disconnect","onScroll","Settings","handleFileInput","file","files","reader","FileReader","readAsDataURL","onloadend","profilePic","result","onerror","console","log","handleDelete","deleteUser","editUser","role","encType","htmlFor","defaultValue","disabled","data-toggle","data-target","setItem","Forgot","forgotPassword","alertMessage","autofocus","Reset","password2","updatePassword","Sidemenu","Main","checkUserNotification","fetchFollowers","getAllUsers","setInterval","notification","idStore","store","addNotification","insert","animationIn","animationOut","dismiss","duration","showIcon","onRemoval","authUser","exact","render","component","withRouter","userData","loadFollowers","loadUsers","createStore","compose","applyMiddleware","thunk","jwtToken","jwtDecode","App","isMobile","ReactDOM","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.71ea5462.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/warbler-logo.25398cf7.png\";","module.exports = \"data:image/jpeg;base64,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\"","import { SET_CURRENT_USER, NEW_CHAT_MESSAGE, SET_FOLLOWING } from \"../actionTypes\";\r\n\r\nconst DEFAULT_STATE = {\r\n    isAuthenticated: false,\r\n    user: {},\r\n    chatMessages: {\r\n        from: \"\",\r\n        messages: []\r\n    },\r\n    following: []\r\n};\r\n\r\nexport default function (state = DEFAULT_STATE, action){\r\n    switch(action.type){\r\n        case SET_CURRENT_USER:\r\n            return {\r\n                isAuthenticated: Boolean(Object.keys(action.user).length),\r\n                user: action.user\r\n            };\r\n        case NEW_CHAT_MESSAGE:\r\n            const chatMessages = {\r\n                from: action.from,\r\n                messages: [...state.chatMessages.messages, action.newMessage]\r\n            }\r\n            return {\r\n                ...state,\r\n                chatMessages\r\n            }\r\n        case SET_FOLLOWING:\r\n            return {\r\n                ...state,\r\n                following: [...action.followers]\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}","import { LOAD_MESSAGES, REMOVE_MESSAGE, REMOVE_MESSAGES } from \"../actionTypes\";\r\n\r\nfunction message(state = [], action){\r\n    switch(action.type){\r\n        case LOAD_MESSAGES:\r\n            return [...state, ...action.messages];\r\n        case REMOVE_MESSAGES:\r\n            return [];\r\n        case REMOVE_MESSAGE: \r\n            return state.filter(message => {\r\n                return message._id !== action.id\r\n            });\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default message;","export const ADD_ERROR = \"ADD_ERROR\";\r\nexport const REMOVE_ERROR = \"REMOVE_ERROR\";\r\nexport const SET_CURRENT_USER = \"SET_CURRENT_USER\";\r\nexport const LOAD_MESSAGES = \"LOAD_MESSAGES\";\r\nexport const REMOVE_MESSAGE = \"REMOVE_MESSAGE\";\r\nexport const LOAD_USER_MESSAGES = \"LOAD_USER_MESSAGES\";\r\nexport const SHOW_USER_INFO = \"SHOW_USER_INFO\";\r\nexport const DELETE_USER_MESSAGE = \"DELETE_USER_MESSAGE\";\r\nexport const NEW_CHAT_MESSAGE = \"NEW_CHAT_MESSAGE\";\r\nexport const GET_ALL_USERS = \"GET_ALL_USERS\";\r\nexport const GET_NOTIFICATION = \"GET_NOTIFICATION\";\r\nexport const SET_FOLLOWING = \"SET_FOLLOWING\";\r\nexport const TOGGLE_SIDEMENU = \"TOGGLE_SIDEMENU\";\r\nexport const REMOVE_MESSAGES = \"REMOVE_MESSAGES\";","import { SHOW_USER_INFO, DELETE_USER_MESSAGE } from \"../actionTypes\";\r\n\r\nconst defaultState = {\r\n    user: {},\r\n    messages: [],\r\n}\r\n\r\nfunction user(state = defaultState, action){\r\n    switch(action.type){\r\n        case SHOW_USER_INFO: \r\n            return {\r\n                user: action.user,\r\n                messages: action.messages\r\n            }\r\n        case DELETE_USER_MESSAGE:\r\n            const newMessages = state.messages.filter(message => {\r\n                return message._id !== action.id\r\n            });\r\n            return {\r\n                ...state,\r\n                messages: newMessages\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default user;","import { GET_ALL_USERS } from \"../actionTypes\";\r\n\r\nconst defaultState = {\r\n    users: []\r\n}\r\n\r\nfunction users(state = defaultState, action){\r\n    switch(action.type){\r\n        case GET_ALL_USERS: \r\n            return {\r\n                users: [...action.users]\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default users;","import { GET_NOTIFICATION } from \"../actionTypes\";\r\n\r\nconst defaultState = {\r\n    from: \"\"\r\n}\r\n\r\nfunction notications(state = defaultState, action){\r\n    switch(action.type){\r\n        \r\n        case GET_NOTIFICATION:\r\n            return {\r\n                from: action.from\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default notications;","import { TOGGLE_SIDEMENU } from \"../actionTypes\";\r\n\r\n\r\nfunction toggleSidemenu(state = {toggle: false}, action){\r\n    switch(action.type){\r\n        case TOGGLE_SIDEMENU: \r\n            return {\r\n                toggle: action.toggle\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default toggleSidemenu;","import {combineReducers} from \"redux\";\r\n\r\nimport currentUser from \"./currentUser\";\r\nimport errors from \"./errors\";\r\nimport messages from \"./messages\";\r\nimport user from \"./user\";\r\nimport users from \"./users\";\r\nimport notifications from \"./notifications\";\r\nimport toggleSidemenu from \"./toggle\";\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n    currentUser,\r\n    errors,\r\n    messages,\r\n    user,\r\n    users,\r\n    notifications,\r\n    toggleSidemenu\r\n});\r\n\r\nexport default rootReducer;","import { ADD_ERROR, REMOVE_ERROR } from \"../actionTypes\";\r\n\r\nexport default function (state = {message: null}, action){\r\n    switch(action.type){\r\n        case ADD_ERROR:\r\n            return {...state, message: action.error};\r\n        case REMOVE_ERROR:\r\n            return {...state, message: null};\r\n        default: \r\n            return state;\r\n    }\r\n}","import axios from \"axios\";\r\n\r\nexport function setTokenHeader(token){\r\n    if(token){\r\n        axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\r\n    }else{\r\n        delete axios.defaults.headers.common[\"Authorization\"];\r\n    }\r\n}\r\n\r\nexport function apiCall(method, path, data){\r\n    return new Promise((resolve, reject) => {\r\n        return axios[method.toLowerCase()](path, data).then(res => {\r\n            return resolve(res.data);\r\n        }).catch(err => {\r\n            if(err.response){\r\n                return reject(err.response.data.error);\r\n            }\r\n            \r\n        });\r\n    })\r\n        \r\n}","import { ADD_ERROR, REMOVE_ERROR } from \"../actionTypes\";\r\n\r\nexport const addError = error => {\r\n    return {\r\n        type: ADD_ERROR,\r\n        error\r\n    }\r\n}\r\n\r\n\r\nexport const removeError = () => {\r\n    return {\r\n        type: REMOVE_ERROR\r\n    }\r\n}\r\n","import { apiCall, setTokenHeader } from \"../../Services/api\";\r\nimport { SET_CURRENT_USER } from \"../actionTypes\";\r\nimport { addError, removeError } from \"./errors\";\r\n\r\nexport function setCurrentUser(user){\r\n    return {\r\n        type: SET_CURRENT_USER,\r\n        user\r\n    };\r\n}\r\n\r\nexport function setAuthorizationToken(token){\r\n    setTokenHeader(token);\r\n}\r\n\r\nexport function logout(){\r\n    return dispatch => {\r\n        localStorage.clear();\r\n        setAuthorizationToken(false);\r\n        dispatch(setCurrentUser({}));\r\n    }\r\n}\r\n\r\nexport function authUser(type, userData){\r\n    return dispatch => {\r\n        return new Promise((resolve, reject) => {\r\n            return apiCall(\"post\", `/api/auth/${type}`, userData)\r\n                .then(({token, ...user}) => {\r\n                    // console.log(user);\r\n                    localStorage.setItem(\"jwtToken\", token);\r\n                    setAuthorizationToken(token);\r\n                    dispatch(setCurrentUser(user));\r\n                    dispatch(removeError());\r\n                    resolve();\r\n                }).catch(err => {\r\n                    dispatch(addError(err.message));\r\n                    reject();\r\n                });\r\n        })\r\n    }\r\n}\r\n\r\nexport function editUser(data, id){\r\n    return dispatch => {\r\n        return new Promise((resolve, reject) => {\r\n            return apiCall(\"put\", `/api/auth/${id}/settings`, data).then(({token, ...user}) => {\r\n                localStorage.setItem(\"jwtToken\", token);\r\n                setAuthorizationToken(token);\r\n                dispatch(setCurrentUser(user));\r\n                // dispatch(removeError());\r\n                dispatch(addError( \"You successfully edited your account settings!\"));\r\n                resolve();\r\n            }).catch(err => {\r\n                dispatch(addError(err.message));\r\n                reject();\r\n            });\r\n        })\r\n    }\r\n}\r\n\r\nexport function updatePassword(data, token){\r\n    return dispatch => {\r\n        return new Promise((resolve, reject) => {\r\n            return apiCall(\"put\", `/api/auth/reset/${token}`, data).then(({message}) => {\r\n                dispatch(addError({text: message, type: \"success\"}));\r\n                resolve();\r\n            }).catch(err => {\r\n                dispatch(addError({text: err.message, type: \"danger\" }));\r\n                reject();\r\n            });\r\n        })\r\n    }\r\n}\r\n\r\nexport function deleteUser(id){\r\n    return dispatch => {\r\n        return new Promise((resolve, reject) => {\r\n            return apiCall(\"delete\", `/api/auth/${id}`).then(() => {\r\n                resolve();\r\n            }).catch(err => {\r\n                debugger;\r\n                reject(err);\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\n","import { TOGGLE_SIDEMENU } from \"../actionTypes\";\r\n\r\nexport function toggleSidemenu(toggle){\r\n    return {\r\n        type: TOGGLE_SIDEMENU,\r\n        toggle\r\n    };\r\n}\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport Logo from \"../Images/warbler-logo.png\";\r\nimport { logout } from \"../Store/Actions/auth\";\r\nimport { toggleSidemenu } from \"../Store/Actions/toggle\";\r\n\r\nclass Navbar extends React.Component{\r\n\r\n    logout = e => {\r\n        e.preventDefault();\r\n        this.props.logout();\r\n    }\r\n\r\n    toggle = e => {\r\n        e.preventDefault();\r\n        this.props.toggleSidemenu(this.props.toggle ? false : true);\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <nav className=\"navbar navbar-expand\">\r\n                <div className=\"container-fluid\">\r\n                    <div className=\"navbar-header\">\r\n                        {this.props.currentUser.isAuthenticated && (\r\n                             <div className={`toggle d-block d-md-none ${this.props.toggle ? \"active\" : null}`} onClick={this.toggle}> </div>\r\n                        )}\r\n                       \r\n                        <Link to=\"/\" className=\"navbar-brand\" onClick={e => this.props.toggleSidemenu(false)}>\r\n                            <img src={Logo} alt=\"Home\"/>\r\n                        </Link>\r\n                    </div>\r\n                   \r\n                   {this.props.currentUser.isAuthenticated ? (\r\n                       <ul className=\"nav navbar-nav navbar-right\"> \r\n                            <li>\r\n                                <Link to={`/users/${this.props.currentUser.user.id}/messages/new`}>New Message</Link>\r\n                            </li>\r\n                            <li>\r\n                                <a onClick={this.logout}>Log out</a>\r\n                            </li>\r\n                       </ul>  \r\n                   )\r\n                   :  <ul className=\"nav navbar-nav navbar-right\">\r\n                        <li>\r\n                            <Link to=\"/signup\">Sign up</Link>\r\n                        </li>\r\n                        <li>\r\n                            <Link to=\"/signin\">Sign in</Link>\r\n                        </li>\r\n                    </ul>}\r\n                \r\n                    \r\n                </div>\r\n            </nav>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nfunction mapStateToProps(state){\r\n    return {\r\n        currentUser: state.currentUser,\r\n        toggle: state.toggleSidemenu.toggle\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, { logout, toggleSidemenu })(Navbar);","import React from \"react\";\r\nimport Moment from \"react-moment\";\r\nimport {Link} from \"react-router-dom\";\r\nimport DefaultProfileImg from \"../Images/default-profile-image.jpg\";\r\n\r\nconst MessageItem = ({date, profileImageUrl, text, username, removeMessage, isCorrectUser}) => {\r\n    const linkToUser = `/users/${username}`;\r\n    return (\r\n        <div>\r\n            <li className=\"list-group-item\">\r\n               <div style={{display: \"flex\"}}>\r\n                    <img src={profileImageUrl || DefaultProfileImg} alt={username} height=\"100\" width=\"100\" className=\"timeline-image\"/>\r\n                    <div className=\"message-area\">\r\n                        <Link to={linkToUser}>@{username} </Link>\r\n                        <span className=\"text-muted\">\r\n                            <Moment className=\"text-muted\" format=\"Do MMM YYYY\">\r\n                                {date}\r\n                            </Moment>\r\n                        </span>\r\n                        <p>{text}</p>\r\n                        \r\n                    </div>\r\n               </div>\r\n                <div>\r\n                    {isCorrectUser && (<a className=\"btn btn-danger float-right text-right\" onClick={removeMessage}>X</a>)}\r\n                </div>\r\n                \r\n            </li>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MessageItem;","import React from \"react\";\r\nimport AutoSuggest from \"react-autosuggest\";\r\nimport FuzzySearch from \"fuzzy-search\";\r\nimport { Link } from \"react-router-dom\"\r\nimport DefaultProfilePic from \"../Images/default-profile-image.jpg\";\r\n\r\nconst theme = {\r\n    input: {\r\n        width: \"100%\",\r\n        height: \"50px\",\r\n        padding: \"10px\",\r\n        border: \"1px solid #0084FF\",\r\n        borderTopLeftRadius: \"18px\",\r\n        borderTopRightRadius: \"18px\",\r\n        borderBottomLeftRadius: \"18px\",\r\n        borderBottomRightRadius: \"18px\",\r\n        outline: \"none\"\r\n    },\r\n    inputOpen: {\r\n        borderBottomLeftRadius: 0,\r\n        borderBottomRightRadius: 0,\r\n    },\r\n    container: {\r\n        margin: \"20px 0\"\r\n    },\r\n    suggestionsContainerOpen: {\r\n        backgroundColor: \"#fff\",\r\n        borderLeft: \"1px solid #0084FF\",\r\n        borderRight: \"1px solid #0084FF\",\r\n        borderBottom: \"1px solid #0084FF\",\r\n        borderBottomLeftRadius: \"18px\",\r\n        borderBottomRightRadius: \"18px\",\r\n        color: \"black\"\r\n    },\r\n    suggestionsList: {\r\n        listStyleType: \"none\",\r\n        padding: 0\r\n    },\r\n    suggestion: {\r\n        cursor: \"pointer\",\r\n        padding: \"10px 20px\",\r\n    },\r\n    suggestionHighlighted: {\r\n        backgroundColor: '#ddd'\r\n    }\r\n}\r\n\r\n\r\nclass Search extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n\r\n        this.state = {\r\n            value: \"\",\r\n            suggestions: []\r\n        }\r\n\r\n       \r\n    }\r\n\r\n\r\n    redirect(username){\r\n        this.props.history.push(`/users/${username}`);\r\n    }\r\n\r\n    getSuggestions = value => {\r\n        return this.searcher.search(value.trim());\r\n    }\r\n    \r\n    getSuggestionValue = suggestion => suggestion.username;\r\n    \r\n    \r\n    renderSuggestion = suggestion => (\r\n        <div onClick={() => this.redirect(suggestion.username)}>\r\n            <img \r\n                style={{\r\n                    borderRadius: \"18px\",\r\n                    marginRight: \"5px\"\r\n                }}\r\n                width=\"25\" \r\n                height=\"25\" \r\n                src={suggestion.profileImageUrl || DefaultProfilePic} \r\n                alt=\"user\"\r\n            />\r\n            <Link to={`/users/${suggestion.username}`}>{suggestion.username}</Link>\r\n        </div>\r\n    );\r\n\r\n    // componentDidMount(){\r\n       \r\n\r\n       \r\n    // }\r\n\r\n    onChange = (event, { newValue }) => {\r\n        this.setState({\r\n            value: newValue\r\n        });\r\n    };\r\n\r\n    onSuggestionsFetchRequested = ({ value }) => {\r\n        this.setState({\r\n            suggestions: this.getSuggestions(value)\r\n        });\r\n    };\r\n\r\n    onSuggestionsClearRequested = () => {\r\n        this.setState({\r\n            suggestions: []\r\n        });\r\n    };\r\n\r\n    render(){\r\n        const { value, suggestions } = this.state;\r\n\r\n        this.searcher = new FuzzySearch(this.props.users, [\"username\"], {caseSensitive: false});\r\n\r\n        const inputProps = {\r\n            placeholder: 'Search for a user...',\r\n            value,\r\n            onChange: this.onChange\r\n        };\r\n\r\n        return (\r\n            <div>\r\n                <AutoSuggest \r\n                    suggestions={suggestions}\r\n                    onSuggestionsFetchRequested={this.onSuggestionsFetchRequested}\r\n                    onSuggestionsClearRequested={this.onSuggestionsClearRequested}\r\n                    getSuggestionValue={this.getSuggestionValue}\r\n                    renderSuggestion={this.renderSuggestion}\r\n                    inputProps={inputProps}\r\n                    theme={theme}\r\n                 />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default Search;","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {fetchMessages, removeMessage, removeMessages} from \"../Store/Actions/messages\";\r\nimport MessageItem from \"../Components/MessageItem\";\r\nimport SearchBar from \"../Components/Search\";\r\n// import MessageForm from \"../Containers/MessageForm\";\r\n\r\nclass Messagelist extends React.Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            pageNumber: 1,\r\n            isLoading: false,\r\n            hasMore: true,\r\n            messages: []\r\n        }\r\n    }\r\n\r\n    handleScroll = e => {\r\n        const dummy = document.querySelector(\"#dummy\");\r\n\r\n        const reached = window.scrollY >= dummy.offsetTop - window.innerHeight;\r\n        if(reached){\r\n            this.loadData();\r\n        }\r\n        \r\n    }\r\n\r\n    componentDidMount(){\r\n        // this.props.fetchMessages(this.state.pageNumber);\r\n        // if(this.props.messages.length === 0){\r\n        this.loadData();\r\n        // }\r\n       \r\n        window.addEventListener(\"scroll\", this.handleScroll);\r\n\r\n        // this.props.history.listen(() => {\r\n        //     this.setState({})\r\n        // })\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        window.removeEventListener(\"scroll\", this.handleScroll);\r\n        this.props.removeMessages();\r\n\r\n    } \r\n\r\n    loadData(){\r\n        if(!this.state.hasMore || this.state.isLoading) return;\r\n\r\n        this.setState({\r\n            isLoading: true\r\n        });\r\n\r\n        this.props.fetchMessages(this.state.pageNumber).then((res) => {\r\n            const hasMore = (res && res.length === 0) ? false : true;\r\n            \r\n            this.setState({\r\n                isLoading: false,\r\n                pageNumber: this.state.pageNumber + 1,\r\n                hasMore\r\n            });\r\n        })\r\n\r\n        //make the apiCall -> in its .then method set the isLoading to false and hasMore to whaterver is the correct value -> increment the page number\r\n    }\r\n\r\n    render(){\r\n        const { messages, removeMessage, currentUser, history, users } = this.props;\r\n        let messageList = messages.map(m => {\r\n            \r\n            return (\r\n                <MessageItem \r\n                    key={m._id} \r\n                    date={m.createAt} \r\n                    text={m.text} \r\n                    username={m.user.username} \r\n                    profileImageUrl={m.user.profileImageUrl} \r\n                    removeMessage={removeMessage.bind(this, m.user._id, m._id)}\r\n                    isCorrectUser={currentUser.id === m.user._id}\r\n                />)\r\n        });\r\n\r\n        // return messageList;\r\n        return (\r\n            <div className=\"row col-md-8\">\r\n                <div className=\"offset-1 col-sm-10\">\r\n                    {/* <MessageForm {...this.props}/> */}\r\n                    <SearchBar history={history} users={users}/>\r\n                    <ul className=\"list-group\" id=\"messages\">\r\n                        {messageList}\r\n                    </ul>\r\n                    {(this.state.isLoading && (\r\n                        <div className=\"loader\" style={{display: \"flex\", justifyContent: \"center\", marginTop: \"10px\"}}>\r\n                            <div className=\"bounce1\"></div>\r\n                            <div className=\"bounce2\"></div>\r\n                            <div className=\"bounce3\"></div>\r\n                        </div>\r\n                    ))}\r\n                    <div id=\"dummy\" style={{height: \"20px\"}}></div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state){\r\n    return {\r\n        messages: state.messages,\r\n        currentUser: state.currentUser.user,\r\n        users: state.users.users\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, {fetchMessages, removeMessage, removeMessages})(Messagelist);","import { apiCall } from \"../../Services/api\";\r\nimport { addError } from \"./errors\";\r\nimport { LOAD_MESSAGES, REMOVE_MESSAGE, REMOVE_MESSAGES} from \"../actionTypes\";\r\n\r\n\r\nexport const loadMessages = messages => {\r\n    return {\r\n        type: LOAD_MESSAGES,\r\n        messages\r\n    };\r\n}\r\n\r\nexport const removeMessages = () => {\r\n    return {\r\n        type: REMOVE_MESSAGES\r\n    }\r\n}\r\n\r\nexport const remove = id => {\r\n    return {\r\n        type: REMOVE_MESSAGE,\r\n        id\r\n    }\r\n}\r\n\r\nexport const removeMessage = (user_id, message_id) => {\r\n    return dispatch => {\r\n        return apiCall(\"delete\", `/api/users/${user_id}/messages/${message_id}`)\r\n            .then(() => dispatch(remove(message_id)))\r\n            .catch(err => dispatch(addError(err.message))); \r\n    }\r\n}\r\n\r\nexport const fetchMessages = page => {\r\n    return dispatch => {\r\n        return new Promise((resolve, reject) => {\r\n            return apiCall(\"get\", `/api/messages/${page}`).then(res => {\r\n                dispatch(loadMessages(res));\r\n                resolve(res);\r\n            }).catch(err => {\r\n                dispatch(addError(err.message));\r\n                reject();\r\n            });\r\n        })\r\n        \r\n    }\r\n}\r\n\r\nexport const postNewMessage = text => (dispatch, getState) => {\r\n    let { currentUser } = getState();\r\n    const id  = currentUser.user.id;\r\n    return apiCall(\"post\", `/api/users/${id}/messages`, { text }).then(res => {\r\n\r\n    }).catch(err => dispatch(addError(err.message)));\r\n};","import React, { useState } from \"react\";\r\nimport DefaultProfileImg from \"../Images/default-profile-image.jpg\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Modal } from \"react-bootstrap\";\r\n\r\nconst UserAside = ({profileImageUrl, username, followers}) => {\r\n\r\n    const [ showModal, setShowModal ] = useState(false);\r\n\r\n    const handleClose = e => {\r\n        setShowModal(false);\r\n    }\r\n\r\n    let following;\r\n    if(followers && followers.length > 0){\r\n        following = followers.map(u => {\r\n            return (\r\n                // <li key={u._id}><Link onClick={this.rerender} to={`/users/${u.username}`}>{u.username}</Link></li>\r\n                <li key={u._id} style={{listStyle: \"none\"}}>\r\n                    <img \r\n                        style={{borderRadius: \"18px\", marginRight: \"5px\"}} \r\n                        width=\"25\"\r\n                        height=\"25\" \r\n                        src={u.profileImageUrl || DefaultProfileImg} \r\n                        alt=\"user\"\r\n                    />\r\n                    <Link to={`/users/${u.username}`}>{u.username}</Link>\r\n                </li>\r\n            );\r\n        }); \r\n    }else{\r\n        following = <em>You are not following anyone!</em>\r\n    }\r\n\r\n    return (\r\n        <aside className=\"col-3 d-none d-md-block\" >\r\n            <div className=\"card user-sidebar\" >\r\n                <img width=\"200\" height=\"253\" className=\"card-img-top\" src={profileImageUrl || DefaultProfileImg} alt=\"Card backgound cap\"/>\r\n                <div className=\"card-body\">\r\n                    <h5 className=\"card-title\">{username}</h5>\r\n                    <div className=\"mb-2\" style={{ display: \"block\"}}>\r\n                        <strong style={{color: \"#007bff\", cursor: \"pointer\"}}> <a onClick={e => setShowModal(true)} >Following: </a></strong><span className=\"badge badge-secondary\">{following.length || 0}</span>\r\n                    </div>\r\n                    <div>\r\n                        <Link to={`/settings`}><i className=\"mr-1 fa fa-cog\" aria-hidden=\"true\"></i>Settings</Link>\r\n                    </div>\r\n                    <Link style={{paddingBottom: \"10px\"}} to={`/users/${username}`}><i className=\"mr-1 fa fa-user\" aria-hidden=\"true\"></i>View Profile</Link>\r\n                    \r\n                </div>\r\n            </div>\r\n\r\n            {/* Modal */}\r\n            <Modal show={showModal} onHide={handleClose}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>You are following:</Modal.Title>\r\n                </Modal.Header>\r\n\r\n                <Modal.Body>\r\n                    <p><strong>Following:</strong></p>\r\n                    <ul>\r\n                        {following}\r\n                    </ul>\r\n                </Modal.Body>\r\n\r\n                <Modal.Footer>\r\n                    <button onClick={handleClose} type=\"button\" className=\"btn btn-danger\" data-dismiss=\"modal\">Close</button>\r\n                </Modal.Footer>\r\n\r\n            </Modal>\r\n          \r\n        </aside>\r\n\r\n    );\r\n}\r\n\r\n\r\n\r\nexport default UserAside;","import React from \"react\";\r\nimport MessageList from \"../Containers/MessageList\";\r\nimport UserAside from \"../Components/UserAside\";\r\n\r\n\r\nconst MessageTimeline = ({profileImageUrl, username, followers, history}) => {\r\n    return (\r\n        <div className=\"row\">\r\n            <UserAside profileImageUrl={profileImageUrl} username={username} followers={followers}/>\r\n            <MessageList history={history}/>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MessageTimeline;","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport MessageTimeline from \"../Components/MessageTimeline\";\r\n\r\n\r\n\r\nconst Homepage = ({currentUser, history}) => {\r\n\r\n    if(!currentUser.isAuthenticated){\r\n        return (\r\n            <div className=\"home-hero\">\r\n                <h1>What's Happening?</h1>\r\n                <h4>New To Warbler?</h4>\r\n                <Link to=\"/signup\" className=\"btn btn-primary\">Sign Up</Link>\r\n            </div>\r\n       );\r\n    }else{\r\n\r\n        return (\r\n            \r\n            <div>\r\n                <MessageTimeline \r\n                    history={history}\r\n                    profileImageUrl={currentUser.user.profileImageUrl} \r\n                    username={currentUser.user.username} \r\n                    followers={currentUser.following}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    \r\n   \r\n}\r\n\r\nexport default (Homepage);","import React from \"react\";\r\nimport { sign } from \"jsonwebtoken\";\r\nimport { Link } from \"react-router-dom\";\r\n// import io from \"socket.io-client\";\r\n\r\nclass AuthForm extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            email: \"\",\r\n            username: \"\",\r\n            password: \"\"\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    handleChange(e){\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        });\r\n    }\r\n\r\n    handleSubmit(e){\r\n        \r\n        const authType = this.props.signUp ? \"signup\" : \"signin\";\r\n        this.props.onAuth(authType, this.state).then(() => {            \r\n           \r\n            this.props.history.push(\"/\");\r\n        }).catch(()=> {\r\n            return;\r\n        });\r\n\r\n        e.preventDefault();\r\n    }\r\n\r\n    render(){\r\n        const { email, username, } = this.state;\r\n        const { heading, buttonText, signUp, errors, history, removeError } = this.props;\r\n        \r\n        history.listen(() => {\r\n            removeError();\r\n        });\r\n\r\n        return(\r\n            <div>\r\n                <div style={{paddingTop: \"10vh\"}} className=\"row justify-content-center align-content-center\">\r\n                    <div className=\"col-12 col-lg-8 text-center\">\r\n                        {errors.message && <div className=\"alert alert-danger\">{errors.message}</div>}\r\n                        <h2>{heading}</h2>\r\n                        <div style={{ width: \"40%\", margin: \"25px auto\"}}>\r\n                            <form onSubmit={this.handleSubmit}>\r\n                                \r\n                                \r\n                                \r\n                                {/* <label htmlFor=\"email\">Email:</label> */}\r\n                                <div className=\"form-group\">\r\n                                    <input \r\n                                        required\r\n                                        autoFocus={true}\r\n                                        type=\"email\" \r\n                                        className=\"form-control\" \r\n                                        id=\"email\"\r\n                                        name=\"email\" \r\n                                        onChange={this.handleChange} \r\n                                        value={email}\r\n                                        placeholder=\"Email\"\r\n                                    />\r\n                                </div>\r\n                               \r\n                                {/* <label htmlFor=\"passowrd\">Password: </label> */}\r\n                                <div className=\"form-group\">\r\n                                    <input \r\n                                        type=\"password\" \r\n                                        required\r\n                                        className=\"form-control\" \r\n                                        id=\"password\" \r\n                                        name=\"password\" \r\n                                        onChange={this.handleChange} \r\n                                        placeholder=\"Password\"\r\n                                    />\r\n                                </div>\r\n                                \r\n                                {signUp && (\r\n                                    <div className=\"form-group\">\r\n                                        {/* <label htmlFor=\"username\">Username: </label> */}\r\n                                        <input \r\n                                            type=\"text\" \r\n                                            className=\"form-control\" \r\n                                            id=\"username\"\r\n                                            name=\"username\" \r\n                                            onChange={this.handleChange} \r\n                                            value={username}\r\n                                            placeholder=\"Username\"\r\n                                        />\r\n                                    </div>\r\n                                )}\r\n                                <div className=\"form-group\">\r\n                                    <button type=\"submit\" className=\"btn mt-4 btn-primary btn-block\">{buttonText}</button>\r\n                                </div>\r\n                                <hr/>\r\n                                {signUp ? (\r\n                                    <Link className=\"float-left\" to=\"/signin\">Already have an account?</Link>\r\n                                    )\r\n                                :(\r\n                                    <div>\r\n                                        <Link className=\"float-left\" to=\"/forgot\">Forgot your password?</Link>\r\n                                        <Link className=\"float-left\" to=\"/signup\">Don't have an account?</Link>\r\n                                    </div>\r\n                                )}\r\n                            </form>\r\n                        </div>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AuthForm;","import { apiCall } from \"../../Services/api\";\r\nimport { SHOW_USER_INFO, DELETE_USER_MESSAGE, NEW_CHAT_MESSAGE, GET_NOTIFICATION, SET_FOLLOWING, GET_ALL_USERS } from \"../actionTypes\";\r\nimport { addError } from \"./errors\";\r\n\r\nexport const loadUserInfo = (user, messages) => {\r\n    return {\r\n        type: SHOW_USER_INFO,\r\n        user,\r\n        messages\r\n    }\r\n}\r\n\r\nexport const remove = id => {\r\n    return {\r\n        type: DELETE_USER_MESSAGE,\r\n        id\r\n    }\r\n}\r\n\r\nexport const newChatMessage = (from) => {\r\n    return {\r\n        type: NEW_CHAT_MESSAGE,\r\n        from\r\n    }\r\n}\r\n\r\nexport const notification = (from) => {\r\n    return{\r\n        type: GET_NOTIFICATION,\r\n        from\r\n    }\r\n}\r\n\r\nexport const loadFollowers = followers => {\r\n    return {\r\n        type: SET_FOLLOWING,\r\n        followers\r\n    }\r\n}\r\n\r\nexport const loadUsers = users => {\r\n    return {\r\n        type: GET_ALL_USERS,\r\n        users\r\n    }\r\n}\r\n\r\nexport const getAllUsers = () => {\r\n    return dispatch => {\r\n        return apiCall(\"get\", \"/api/users\").then(users => {\r\n            dispatch(loadUsers(users));\r\n        }).catch(err => {\r\n            dispatch(addError(err));\r\n        });\r\n    }\r\n}\r\n\r\nexport const fetchUserInfo = username => {\r\n    return dispatch => {\r\n        return apiCall(\"get\", `/api/users/${username}`).then(res => {\r\n            dispatch(loadUserInfo(res[0], res[0].messages));\r\n        }).catch(err => {\r\n            dispatch(addError(err));\r\n        });\r\n    }\r\n}\r\n\r\nexport const fetchFollowers = id => {\r\n    return dispatch => {\r\n        return apiCall(\"get\", `/api/users/${id}/followers`).then(followers => {\r\n            dispatch(loadFollowers(followers));\r\n        }).catch(err => {\r\n            dispatch(addError(err));\r\n        });\r\n    }\r\n}\r\n\r\nexport const followUser = (username, id) => {\r\n    return dispatch => {\r\n        return new Promise((resolve, reject) => {\r\n            return apiCall(\"put\", `/api/users/${username}/follow/${id}`).then(user => {\r\n                // dispatch(addError(\"Succesfully followed \"));\r\n                // console.log(user);\r\n                // dispatch(loadUserInfo(user[0], user[0].messages));\r\n                return resolve(user);\r\n            }).catch(err => {\r\n                dispatch(addError(err));\r\n                return reject();\r\n            });\r\n        })\r\n        \r\n    }\r\n}\r\n\r\nexport const unfollowUser = (username, id) => {\r\n    return dispatch => {\r\n        return new Promise((resolve, reject) => {\r\n            return apiCall(\"put\", `/api/users/${username}/unfollow/${id}`).then(user => {\r\n                return resolve(user);\r\n            }).catch(err => {\r\n                dispatch(addError(err));\r\n                return reject();\r\n            });\r\n        })\r\n    }\r\n}\r\n\r\nexport const deleteMessage = (userId, messageId) => {\r\n    return dispatch => {\r\n        return apiCall(\"delete\", `/api/users/${userId}/messages/${messageId}`)\r\n            .then(() => {\r\n                dispatch(remove(messageId));\r\n            })\r\n            .catch(err => dispatch(addError(err.message))); \r\n    }\r\n}\r\n\r\nexport const addMessageNotification = (to, from) => {\r\n    return dispatch => {\r\n        return apiCall(\"put\", `/api/users/${to}/${from}`).then(user => {\r\n            \r\n            // dispatch(newChatMessage(user.chatMessages.from));\r\n            return user;\r\n        }).catch(err => dispatch(addError(err)));\r\n    }\r\n}\r\n\r\nexport const checkUserNotification = username => {\r\n    return dispatch => {\r\n        // return new Promise((resolve, reject) => {\r\n            return apiCall(\"get\", `/api/users/${username}/notification`).then(res => {\r\n                if(res[0]){\r\n                    return dispatch(notification(res[0].chatMessages.from));\r\n                }\r\n                \r\n                // return res[0];\r\n            }).catch(err => {\r\n                // dispatch(addError(err));\r\n                return err;\r\n            });\r\n        // });\r\n    }\r\n}\r\n\r\nexport const deleteNotification = username => {\r\n    return dispatch => {\r\n        return apiCall(\"put\", `/api/users/${username}`).then(res => {\r\n            return res;\r\n        }).catch(err => {\r\n            dispatch(addError(err));\r\n        });\r\n    }\r\n}\r\n\r\nexport const forgotPassword = email => {\r\n    return dispatch => {\r\n        return apiCall(\"post\", \"/api/users/forgot\", {email}).then(res => {\r\n            dispatch(addError({text: res.message, type: \"success\"}));\r\n        }).catch(err => {\r\n            if(err.message){\r\n                dispatch(addError({text: err.message, type: \"danger\"}));\r\n            }\r\n           \r\n        });\r\n    }\r\n}","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nexport default function withAuth(ComponentToBeRendered, socket){\r\n    class Authenticate extends React.Component{\r\n        componentDidMount(){\r\n            if(this.props.isAuthenticated === false){\r\n                this.props.history.push(\"/signin\");\r\n            }\r\n        }\r\n\r\n        componentDidUpdate(nextProps){\r\n            if(nextProps.isAuthenticated === false){\r\n                this.props.history.push(\"/signin\");\r\n            }\r\n        }\r\n        \r\n        render(){\r\n            return <ComponentToBeRendered {...this.props}  socket={socket} />;\r\n        }\r\n\r\n        \r\n    }\r\n\r\n    function mapStateToProps(state){\r\n        return {\r\n            isAuthenticated: state.currentUser.isAuthenticated\r\n        }\r\n    }\r\n    \r\n    return connect(mapStateToProps)(Authenticate);\r\n}\r\n\r\n","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport { postNewMessage } from \"../Store/Actions/messages\";\r\n\r\n\r\nclass MessageForm extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            message: \"\"\r\n        }\r\n\r\n        this.handleNewMessage = this.handleNewMessage.bind(this);\r\n    }\r\n\r\n    handleNewMessage (e) {\r\n        e.preventDefault();\r\n        this.props.postNewMessage(this.state.message);\r\n        // console.log(\"hi\");\r\n        this.setState({message: \"\"});\r\n        // this.setState({});\r\n        // console.log(this.state);\r\n        this.props.history.push(\"/\");\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <form onSubmit={this.handleNewMessage}>\r\n                {this.props.errors.message && \r\n                    (<div className=\"alert alert-danger\">{this.props.errors.message}</div>\r\n                )}\r\n                <textarea\r\n                    style={{resize: \"none\"}}\r\n                    rows={5}  \r\n                    placeholder=\"Enter your message...\"\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    value={this.state.message}\r\n                    onChange={e => this.setState({message: e.target.value})} \r\n                />\r\n                <button style={{marginTop: \"20px\"}} className=\"btn btn-success pull-right\" type=\"submit\">Add New Message</button>\r\n            </form>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state){\r\n    return {\r\n        errors: state.errors\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, {postNewMessage})(MessageForm);","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { fetchUserInfo, followUser, unfollowUser, deleteMessage } from \"../Store/Actions/user\";\r\nimport { Link } from \"react-router-dom\";\r\nimport MessageItem from \"../Components/MessageItem\";\r\nimport { Modal } from \"react-bootstrap\";\r\nimport DefaultProfileImage from \"../Images/default-profile-image.jpg\";\r\n\r\n\r\nclass UserMessage extends React.Component{\r\n\r\n    _isMountedCheck = false;\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            infoMessage: \"\",\r\n            error: \"\",\r\n            isFollowing: false,\r\n            followers: 0,\r\n            followersList: [],\r\n            showModal: false\r\n        }\r\n\r\n        this.handleFollow = this.handleFollow.bind(this);\r\n        this.handleUnfollow = this.handleUnfollow.bind(this);\r\n        this.handleDeleteMessage = this.handleDeleteMessage.bind(this);\r\n    }\r\n    \r\n    componentDidMount(){\r\n        this._isMountedCheck = true;\r\n\r\n        const username = this.props.match.params.username;\r\n\r\n\r\n        this.props.fetchUserInfo(username).then(() => {\r\n            const { user, currentUser } = this.props;\r\n            // console.log()\r\n            if(Object.keys(user).length === 0) this.props.history.push(\"/\");\r\n\r\n            if(user.followers){\r\n                user.followers.forEach(user => {\r\n                \r\n                    if(user._id === currentUser.user.id){\r\n                        if(this._isMountedCheck){\r\n                            this.setState({\r\n                                ...this.state,\r\n                                isFollowing: true\r\n                            });\r\n                        }\r\n                        \r\n                    }\r\n                });\r\n            }\r\n           \r\n            if(this._isMountedCheck) \r\n                this.setState({...this.state, followers: user.followers.length, followersList: user.followers});\r\n            \r\n        });\r\n\r\n        \r\n    }\r\n\r\n    componentWillUnmount(){\r\n        // this.abortController.abort();\r\n        this._isMountedCheck = false;\r\n    }\r\n\r\n    setInfoState = (state) => {\r\n        this.setState(state, () => {\r\n            setTimeout(() => {\r\n                this.setState({\r\n                    ...this.state,\r\n                    infoMessage: \"\",\r\n                    error: \"\"\r\n                })\r\n            }, 5000)\r\n        });\r\n    }\r\n\r\n    handleFollow(user, currentUser){\r\n        this.props.followUser(user.username, currentUser.user.id)\r\n        .then(res => {\r\n            let newFollowersNum = this.state.followers + 1;\r\n            this.setInfoState({isFollowing: true, infoMessage: `You succesfully followed ${res[0].username}`, followers: newFollowersNum,});\r\n        }).catch(err => {\r\n           \r\n            this.setState({...this.state, error: \"Something went wrong! Try again later!\"});\r\n        });\r\n    }\r\n\r\n    handleUnfollow(user, currentUser){\r\n        this.props.unfollowUser(user.username, currentUser.user.id)\r\n        .then(res => {\r\n            let newFollowersNum = this.state.followers - 1;\r\n            this.setInfoState({isFollowing: false,  infoMessage: `You succesfully unfollowed ${res[0].username}`, followers: newFollowersNum});\r\n        }).catch(err => {\r\n           \r\n            this.setInfoState({...this.state, error: \"Something went wrong! Try again later!\"});\r\n        });\r\n    }\r\n\r\n    handleDeleteMessage(userId, messageId){\r\n        this.props.deleteMessage(userId, messageId).then(() => {\r\n            this.setInfoState({...this.state, infoMessage: \"You successfully deleted the message!\"});\r\n        });\r\n    }\r\n\r\n    handleClose = e => {\r\n        this.setState({\r\n            showModal: false\r\n        });\r\n    }\r\n\r\n    render(){\r\n        const { currentUser, user, messages } = this.props;\r\n        \r\n\r\n        let isSameUser = currentUser.user.id === user._id;\r\n        const messagesList = messages.reverse().map(m => {\r\n            return (\r\n                <MessageItem \r\n                    key={m._id} \r\n                    date={m.createdAt} \r\n                    text={m.text} \r\n                    username={user.username} \r\n                    profileImageUrl={user.profileImageUrl}\r\n                    removeMessage={() => this.handleDeleteMessage(m.user, m._id)}\r\n                    isCorrectUser={currentUser.user.id === m.user}\r\n                />)\r\n        });\r\n        \r\n        let userFollowers;\r\n        if(this.state.followersList.length > 0){\r\n            userFollowers = this.state.followersList.map(u => {\r\n                return (\r\n                    // <li key={u._id}><Link onClick={this.rerender} to={`/users/${u.username}`}>{u.username}</Link></li>\r\n                    <li key={u._id} style={{listStyle: \"none\"}}>\r\n                        <img \r\n                            style={{borderRadius: \"18px\", marginRight: \"5px\"}} \r\n                            width=\"25\"\r\n                            height=\"25\" \r\n                            src={u.profileImageUrl || DefaultProfileImage} \r\n                            alt=\"user\"\r\n                        />\r\n                        <Link to={`/users/${u.username}`}>{u.username}</Link>\r\n                        \r\n                    </li>\r\n                );\r\n            }); \r\n        }else{\r\n            userFollowers = <em>No followers yet</em>\r\n        }\r\n        \r\n\r\n        const col1 = currentUser.isAuthenticated ? \"row col-md-8\" : \"row col-sm-12\";\r\n        return(\r\n            <div className={col1}>\r\n                <div className=\"col-sm-12\">\r\n                  \r\n                    {this.state.infoMessage && (<div className={this.state.error ? \"alert alert-danger\" : \"alert alert-success\"}>{this.state.infoMessage}</div>)}\r\n                    \r\n                    <div className=\"show-user\">\r\n                        <div className=\"cover\" >\r\n                            <img className=\"user-avatar\" height=\"200\" width=\"200\" src={user.profileImageUrl || DefaultProfileImage} alt={user.username}/>\r\n                        </div>\r\n                        \r\n                        <p>@{user.username}</p>\r\n                        \r\n                        <div className=\"followers\">\r\n                            <div>\r\n                                <span className=\"email\">{user.email}</span>\r\n                                <strong style={{color: \"#007bff\", cursor: \"pointer\"}}> <a onClick={e => this.setState({showModal: true})}>Followers: </a></strong><span className=\"badge badge-secondary\">{this.state.followers}</span>\r\n                            </div>\r\n                            <div>\r\n                                <div className=\"links\">\r\n                                    {currentUser && isSameUser && (<Link style={{fontSize: \"18px\"}} to=\"/settings\"><i className=\"mr-1 fa fa-cog\" aria-hidden=\"true\"></i>Settings</Link>)}\r\n                                    {currentUser && !isSameUser && (<Link className=\"mb-3\" to={`/chat/${user.username}`}>Direct Message</Link>)}\r\n                                    {currentUser &&  !isSameUser && ( !this.state.isFollowing ?\r\n                                        <button onClick={() => {this.handleFollow(user, currentUser)}} className=\"btn btn-primary \">Follow</button>\r\n                                        : <button onClick={() => {this.handleUnfollow(user, currentUser)}} className=\"btn btn-primary \">Unfollow</button>\r\n                                    )}\r\n                                </div>\r\n                                \r\n                            </div>\r\n                                \r\n                        </div>\r\n                       \r\n                        \r\n                        \r\n                        {/* <button onClick={() => {this.handleClick(user, currentUser)}} className=\"btn btn-primary \">Follow</button> */}\r\n                    </div>\r\n                    {messagesList.length === 0 ? <div style={{textAlign: \"center\"}}><em>No posts yet!</em></div> : \r\n                        <ul className=\"list-group\" id=\"messages\">\r\n                            {messagesList}\r\n                        </ul>\r\n                    }\r\n                </div>\r\n\r\n                {/* Modal */}\r\n                <Modal show={this.state.showModal} onHide={this.handleClose}>\r\n                    <Modal.Header closeButton>\r\n                        <Modal.Title>Followers of {user.username}</Modal.Title>\r\n                    </Modal.Header>\r\n\r\n                    <Modal.Body>\r\n                        <p><strong>Followed by:</strong></p>\r\n                        <ul>\r\n                            {userFollowers}\r\n                        </ul>\r\n                    </Modal.Body>\r\n\r\n                    <Modal.Footer>\r\n                        <button onClick={this.handleClose} type=\"button\" className=\"btn btn-danger\" data-dismiss=\"modal\">Close</button>\r\n                    </Modal.Footer>\r\n\r\n                </Modal>\r\n               \r\n               \r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state){\r\n    \r\n    return{\r\n        currentUser: state.currentUser,\r\n        user: state.user.user,\r\n        messages: state.user.messages,\r\n        users: state.users\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, {fetchUserInfo, followUser, unfollowUser, deleteMessage})(UserMessage);\r\n\r\n","import React from \"react\";\r\nimport UserAside from \"../Components/UserAside\";\r\nimport UserMessages from \"../Containers/UserMessages\";\r\n\r\nfunction UserShow(props){\r\n    \r\n    return(\r\n        <div className=\"row\">\r\n            {props.currentUser.isAuthenticated && (\r\n                <UserAside  \r\n                    profileImageUrl={props.currentUser.user.profileImageUrl} \r\n                    username={props.currentUser.user.username} \r\n                    followers={props.currentUser.following}\r\n                />\r\n            )}\r\n            \r\n            <UserMessages {...props} />\r\n        </div>\r\n    );\r\n    \r\n}\r\n\r\nexport default UserShow;","import React from \"react\";\r\nimport Moment from \"react-moment\";\r\nimport \"../../css/Chat.css\";\r\n\r\nconst ChatMessage = ({from, text, user, created}) => {\r\n    const momentStyle = from === \"outgoing\" ? {display: \"flex\", justifyContent: \"flex-end\"} : {display: \"flex\", justifyContent: \"flex-start\"};\r\n    return (\r\n        <div className={`message-row ${from}`}>\r\n            {(from === \"received\" && <div className=\"text-muted\" style={{padding: \"0px 10px\", fontWeight: \"bold\"}}>{user}</div>)}\r\n            <div className=\"message-content\">\r\n                <div className=\"message-text\">{text}</div>\r\n            </div>\r\n            <div className=\"text-muted\"  style={momentStyle}> <Moment fromNow>{created}</Moment></div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ChatMessage;","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"../../css/Chat.css\";\r\n\r\nconst ChatHeader = ({user}) => {\r\n\r\n    // handleClick = (e) => {\r\n\r\n    // }\r\n\r\n    return (\r\n        <div className=\"chat-header\">\r\n            {/* <img src={this.props.currentUser.user.profileImageUrl} alt=\"\"/> */}\r\n            {/* <p>{this.props.currentUser.user.username}</p> */}\r\n            <p>{user}</p>\r\n            <Link style={{color: \"white\"}} to={`/users/${user}`}><i className=\"fa fa-info-circle\"></i></Link>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ChatHeader;","import React, { useState, useEffect } from \"react\";\r\nimport { Picker } from \"emoji-mart\";\r\nimport 'emoji-mart/css/emoji-mart.css'\r\nimport \"../../css/Chat.css\";\r\n\r\nconst ChatInput = ({value, onChange, onKeyUp, onSubmit, onEmojiClick}) => {\r\n\r\n    const [showEmoji, setShowEmoji] = useState(false);\r\n    const [rightMargin, setRightMargin] = useState(undefined);\r\n    const [bottomMargin, setBottomMargin] = useState(undefined);\r\n\r\n    const showEmojiPicker = () => {\r\n        showEmoji ? setShowEmoji(false) : setShowEmoji(true);\r\n    }\r\n\r\n    const resize = e => {\r\n        \r\n        const width = window.innerWidth;\r\n        const height = window.innerHeight;\r\n       \r\n        if(width <= 991 && width > 500){\r\n            setRightMargin(\"60px\");\r\n        }else if(width > 991){\r\n            setRightMargin(\"90px\");\r\n        }else if(width <= 500){\r\n            setRightMargin(\"40px\");\r\n        }\r\n\r\n        if(height >= 600){\r\n            setBottomMargin(\"50px\");\r\n        }else if(height <= 600 && height > 470){\r\n            setBottomMargin(\"30px\");\r\n        }else if(height <= 470 && height > 370){\r\n            setBottomMargin(\"15px\");\r\n        }else if(height <= 370){\r\n            setBottomMargin(\"5px\");\r\n        }\r\n\r\n    };\r\n\r\n    // const closePicker = e => {\r\n    //     console.log(e.target.className);\r\n    // }\r\n\r\n    useEffect(() => {\r\n\r\n        resize();\r\n        window.addEventListener(\"resize\", resize);\r\n        // window.addEventListener(\"click\", closePicker);\r\n\r\n        return () => {\r\n            window.removeEventListener(\"resize\", resize);\r\n            // window.removeEventListener(\"click\", closePicker);\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        // <div>\r\n            <div className=\"chat-input\">\r\n                <div className=\"inputs\">\r\n                    <input \r\n                        value={value} \r\n                        name=\"message\" \r\n                        onChange={onChange} \r\n                        onKeyUp={onKeyUp} \r\n                        type=\"text\" \r\n                        placeholder=\"Enter your message...\"\r\n                        // style={{width: \"100%\", height: \"100%\"}}\r\n                    />\r\n                    <div className=\"emoji-picker\" style={{textAlign: \"center\", flex: \"3%\"}} onClick={showEmojiPicker}>\r\n                        <i style={{color: \"#0084FF\", cursor: \"pointer\", fontSize: \"18px\"}} className=\"fa fa-smile-o\"></i>\r\n                        \r\n                    </div>\r\n                    \r\n                </div>\r\n                <div className=\"submit\">\r\n                    <i style={{color: \"#0084FF\", cursor: \"pointer\"}} className=\"fa fa-paper-plane\" onClick={onSubmit}></i>\r\n                </div>\r\n                {showEmoji && \r\n                <Picker\r\n                    color={\"#0084FF\"} \r\n                    showPreview={false} \r\n                    title='Pick your emoji' \r\n                    emoji='point_up' \r\n                    style={{position: \"absolute\", bottom: bottomMargin, right: rightMargin, float: \"right\"}}\r\n                    onSelect={(e) => {\r\n                        onEmojiClick(e);\r\n                        // setShowEmoji(false);\r\n                    }}\r\n                />}\r\n                \r\n            </div>\r\n            \r\n\r\n        \r\n    );\r\n}\r\n\r\nexport default ChatInput;","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport io from \"socket.io-client\";\r\nimport Scroll from \"react-scroll-to-bottom\";\r\nimport { addMessageNotification, deleteNotification } from \"../Store/Actions/user\"\r\nimport { apiCall } from \"../Services/api\";\r\nimport ChatMessage from \"../Components/Chat/ChatMessage\";\r\nimport ChatHeader from \"../Components/Chat/ChatHeader\";\r\nimport ChatInput from \"../Components/Chat/ChatInput\";\r\nimport UserAside from \"../Components/UserAside\";\r\nimport \"../css/Chat.css\"; \r\n\r\nclass Chat extends React.Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            message: \"\",\r\n            messages : [],\r\n            roomId: \"\",\r\n            pageNumber: 1,\r\n            isLoading: false,\r\n            hasMore: true\r\n            // received: []\r\n        }\r\n        \r\n        this.socket = this.props.socket;\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        const host = window.location.protocol + \"//\" + window.location.hostname + \":8080\";\r\n        // console.log(host);\r\n        const { currentUser, match } = this.props;\r\n        const to = match.params.username;\r\n        this.socket = io.connect(host);\r\n        let info = {\r\n            username: currentUser.user.username,\r\n            to\r\n            // id: currentUser.user.id\r\n        }\r\n        // this.props.addMessageNotification(to, info.username);\r\n        this.socket.emit(\"register\", info);\r\n        this.socket.on(\"private-message\", ({message, user}) => {\r\n            this.setState({\r\n                messages: [...this.state.messages, {message, user, received: true}]\r\n            });\r\n        });\r\n\r\n        const data = {\r\n            username: currentUser.user.username,\r\n            receiver: to,\r\n            pageNumber: this.state.pageNumber\r\n        }\r\n\r\n        \r\n        this.loadChat(data);\r\n    }\r\n\r\n    loadChat(data){\r\n\r\n        if(this.state.isLoading || !this.state.hasMore) return;\r\n\r\n        this.setState({\r\n            isLoading: true\r\n        });\r\n\r\n        apiCall(\"post\", \"/api/chats\", data).then(chatRoom => {\r\n            let loadedMessages = [];\r\n            if(chatRoom[0] !== undefined){\r\n                loadedMessages = chatRoom[0].messages.map(m => {\r\n                    \r\n                    return {\r\n                        message: m.message,\r\n                        user: m.from,\r\n                        received: m.from === data.receiver ? true : false,\r\n                        created: m.date\r\n                    }\r\n                }); \r\n\r\n                const hasMore = loadedMessages[0].message === undefined ? false : true;\r\n                this.setState({\r\n                    ...this.state, \r\n                    roomId: chatRoom[0]._id,\r\n                    messages: [ ...loadedMessages, ...this.state.messages],\r\n                    pageNumber: this.state.pageNumber + 1,\r\n                    isLoading: false,\r\n                    hasMore\r\n                });\r\n            }else{\r\n                this.setState({\r\n                    ...this.state,\r\n                    roomId: chatRoom._id,\r\n                    isLoading: false\r\n                })\r\n            }\r\n            \r\n\r\n           \r\n        });\r\n\r\n        \r\n    }\r\n\r\n    handleClick(e){\r\n        // this.setState({message: e.target.value});\r\n        // const message = e.target.value;\r\n        const {message} = this.state;\r\n        const user = this.props.currentUser.user.username;\r\n        const to = this.props.match.params.username;\r\n        \r\n        \r\n        if(e.keyCode === 13 && message){\r\n           this.submitFunction(message, user, to);\r\n        }\r\n    }\r\n\r\n    handleSubmit(e){\r\n        const {message} = this.state;\r\n        const user = this.props.currentUser.user.username;\r\n        const to = this.props.match.params.username;\r\n\r\n        this.submitFunction(message, user, to);\r\n    }\r\n\r\n    submitFunction = (message, user, to) => {\r\n        message = message.trim();\r\n        if(message !== \"\"){\r\n            this.props.addMessageNotification(to, user);\r\n            apiCall(\"put\", `/api/chats/${this.state.roomId}`, {from: user, message: message}).then(chat => {\r\n                // console.log(chat);\r\n            });\r\n            this.setState({\r\n                messages: [...this.state.messages, {message, user}],\r\n                message: \"\"\r\n            });\r\n            this.socket.emit(\"private-message\", {\r\n                to,\r\n                message,\r\n                user,\r\n            });\r\n        }\r\n        \r\n    }\r\n    \r\n    handleChange = (e) => {\r\n        this.setState({\r\n            ...this.state,\r\n            [e.target.name]: e.target.value\r\n        });\r\n    }\r\n\r\n    \r\n\r\n    handleScroll = (e) => {\r\n\r\n        const { currentUser, match } = this.props;\r\n        const to = match.params.username;\r\n\r\n        // check if the scroll event is fired in the emoji picker -> if so dont load new data\r\n        const className = e.target.className;\r\n        const top = e.target.scrollTop === 0;\r\n        if (top && className !== \"emoji-mart-scroll\") { \r\n            const data = {\r\n                username: currentUser.user.username,\r\n                receiver: to,\r\n                pageNumber: this.state.pageNumber,\r\n                \r\n            }\r\n\r\n            this.loadChat(data);\r\n        }\r\n    }\r\n\r\n    handleEmojiClick = e => {\r\n        this.setState({\r\n            ...this.state,\r\n            message: this.state.message + e.native\r\n        })\r\n    }\r\n    \r\n    render(){\r\n        //check if the username in the url is same as the current user -> if it is the same redirect the user back with history.push(\"/\") || history.back()\r\n       \r\n        const to = this.props.history.location.pathname.split(\"/\")[2];\r\n        if(to === this.props.currentUser.user.username){\r\n            // this.props.history.goBack();\r\n            this.props.history.push(\"/\");\r\n        }\r\n        const messages = this.state.messages.map((m, i) => {\r\n            if(m.message !== undefined){\r\n                return <ChatMessage \r\n                    key={i} \r\n                    from={m.received ? \"received\" : \"outgoing\"} \r\n                    text={m.message} user={m.user} created={m.created}\r\n                />\r\n            }\r\n           \r\n        });\r\n\r\n\r\n        this.props.history.listen(() => {\r\n            this.socket.disconnect();\r\n            this.props.deleteNotification(this.props.currentUser.user.username);\r\n        });\r\n\r\n        return (\r\n            //Add emojies -> style the chats -> add username and potentially the profile pic above the message -> add from using react-moment module\r\n            <div className=\"d-flex\" style={{height: \"90vh\"}}>\r\n                {this.props.currentUser.isAuthenticated && (\r\n                    <UserAside  \r\n                        profileImageUrl={this.props.currentUser.user.profileImageUrl} \r\n                        username={this.props.currentUser.user.username}\r\n                        followers={this.props.currentUser.following}\r\n                    />\r\n                )}\r\n                <div className=\"col-12 col-md-8 offset-md-1 \" >\r\n                    <div className=\"chat-container\" onScroll={this.handleScroll}>\r\n                        <ChatHeader user={to}/>\r\n                        <Scroll > \r\n                            <div className=\"message-list\" >\r\n                                {(!this.state.hasMore && (\r\n                                    <div style={{display: \"flex\", justifyContent: \"center\", margin: \"10px 0\"}}>\r\n                                        <em>No more messages!</em>\r\n                                    </div>\r\n                                ))}\r\n                                {(this.state.isLoading && (\r\n                                    <div className=\"loader\" style={{display: \"flex\", justifyContent: \"center\", marginTop: \"10px\"}}>\r\n                                        <div className=\"bounce1\"></div>\r\n                                        <div className=\"bounce2\"></div>\r\n                                        <div className=\"bounce3\"></div>\r\n                                    </div>\r\n                                ))}\r\n                                {messages}\r\n                            </div>\r\n                        </Scroll>\r\n                        \r\n                        <ChatInput \r\n                            value={this.state.message}\r\n                            onChange={this.handleChange}\r\n                            onKeyUp={this.handleClick}\r\n                            onSubmit={this.handleSubmit}\r\n                            onEmojiClick={this.handleEmojiClick}\r\n                        />\r\n                    </div>\r\n                    \r\n                    \r\n                </div>\r\n            </div>\r\n           \r\n\r\n            \r\n           \r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state){\r\n    return {\r\n        currentUser: state.currentUser\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, {addMessageNotification, deleteNotification})(Chat);","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { editUser, deleteUser, logout } from \"../Store/Actions/auth\";\r\nimport { removeError } from \"../Store/Actions/errors\";\r\nimport DefaultProfilePic from \"../Images/default-profile-image.jpg\";\r\nimport { Modal } from \"react-bootstrap\";\r\n\r\nclass Settings extends React.Component{\r\n\r\n\r\n    // _isMounted = false;\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        const user = this.props.currentUser.user;\r\n\r\n        // console.log(user.profileImageUrl);\r\n        this.state = {\r\n            username: user.username,\r\n            email: user.email,\r\n            profilePic: user.profileImageUrl || DefaultProfilePic,\r\n            file: null,\r\n            showModal: false\r\n            // message: \"\"\r\n        }\r\n\r\n    }\r\n\r\n    handleClose = e => {\r\n        this.setState({\r\n            showModal: false\r\n        })\r\n    }\r\n\r\n    handleChange = e => {\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        })\r\n    }\r\n\r\n    handleFileInput = e => {\r\n        const file = e.target.files[0];\r\n        const reader = new FileReader();\r\n\r\n        reader.readAsDataURL(file);\r\n        reader.onloadend = () => {\r\n            this.setState({\r\n                profilePic: reader.result,\r\n                file: reader.result\r\n            });\r\n        }\r\n\r\n        reader.onerror = () => {\r\n            console.log(\"error\");\r\n        }\r\n\r\n    }\r\n\r\n    handleDelete = e => {\r\n        e.preventDefault();\r\n        this.props.deleteUser(this.props.currentUser.user.id).then(() => {\r\n            this.props.logout();\r\n            this.setState({showModal: false});\r\n            this.props.history.push(\"/\");\r\n        }).catch(err => {\r\n            // debugger;\r\n        });\r\n\r\n\r\n    }\r\n\r\n    handleSubmit = e => {\r\n        e.preventDefault();\r\n\r\n        const data = {\r\n            username: this.state.username,\r\n            email: this.state.email,\r\n            file: this.state.file\r\n        }\r\n\r\n\r\n        this.props.editUser(data, this.props.currentUser.user.id).then(data => {\r\n            \r\n        });        \r\n    }\r\n\r\n    render(){\r\n\r\n        this.props.history.listen(() => {\r\n            this.props.removeError();\r\n        });\r\n\r\n        return (\r\n            <div>\r\n                {this.props.error.message && \r\n                        <div className=\"alert alert-success\" role=\"alert\">\r\n                            {this.props.error.message}\r\n                        </div>\r\n                }\r\n                <div className=\"row d-flex justify-content-center\">\r\n                    \r\n                    <div className=\"col-10\">\r\n                        <h3 className=\"pt-3\">Account Settings</h3>\r\n                        <div className=\"card\">\r\n                            <div className=\"px-2 px-md-5 pt-5 card-body\">\r\n                                <form encType=\"multipart/form-data\" onSubmit={this.handleSubmit}>\r\n                                    <div className=\"row\">\r\n                                        <div className=\"col-8\">\r\n                                            <div className=\"form-group\">\r\n                                                <label htmlFor=\"username\" className=\"labels\"><i className=\"fa fa-user\"></i> Username: </label>\r\n                                                <input onChange={this.handleChange} className=\"form-control\" id=\"username\" type=\"text\" name=\"username\" value={this.state.username}></input>\r\n                                            </div>\r\n\r\n                                            <div className=\"form-group\">\r\n                                                <label htmlFor=\"email\" className=\"labels\"><i className=\"fa fa-envelope\"></i> Email: </label>\r\n                                                <input onChange={this.handleChange} className=\"form-control\" id=\"email\" type=\"email\" name=\"email\" value={this.state.email} />\r\n                                            </div>\r\n\r\n                                            <div className=\"form-group\">\r\n                                                <label htmlFor=\"password\" className=\"labels\"><i className=\"fa fa-lock\"></i> Password: </label>\r\n                                                <input  className=\"form-control\" id=\"password\" type=\"password\" defaultValue=\"***********\" disabled/>\r\n                                                <small id=\"password\" className=\"form-text text-muted\"><Link to=\"/forgot\">Click here to reset your password</Link></small>\r\n                                            </div>\r\n\r\n                                            <input type=\"submit\" className=\"mt-3 btn btn-primary\" defaultValue=\"Save changes\"/>\r\n            \r\n                                            <div className=\"mt-3 float-md-right\">\r\n                                                <button onClick={e => this.setState({showModal: true})} type=\"button\" className=\"btn btn-danger\" data-toggle=\"modal\" data-target=\"#deleteForm\">Delete account</button>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"col-4 text-center\" id=\"profile-image\">\r\n                                            <img height=\"250\" width=\"250\" className=\"img-fluid\" id=\"accImage\" src={this.state.profilePic} alt=\"ProfilePic\"/>\r\n                                            <label id=\"profilePicLabel\" className=\"btn btn-primary mt-4 btn-sm btn-md-lg\" htmlFor=\"profilePic\">Upload Picture</label>\r\n                                            <input onChange={this.handleFileInput} style={{display: \"none\"}} type=\"file\" name=\"profilePic\" id=\"profilePic\"/>\r\n                                            {/* add onChange method -> save profile image -> preview it in the browser */}\r\n                                        </div>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Modal */}\r\n                <Modal show={this.state.showModal} onHide={this.handleClose}>\r\n                    <Modal.Header closeButton>\r\n                        <Modal.Title>Delete Account</Modal.Title>\r\n                    </Modal.Header>\r\n\r\n                    <Modal.Body>\r\n                        <p>Are you sure you want to delete your account?</p>\r\n                        <em>You will lose all associated data to your account!</em>\r\n                    </Modal.Body>\r\n\r\n                    <Modal.Footer>\r\n                        <button onClick={this.handleClose} type=\"button\" className=\"btn btn-secondary\">No</button>\r\n                        <button onClick={this.handleDelete} className=\"btn btn-danger\">Yes</button>\r\n                    </Modal.Footer>\r\n\r\n                </Modal>\r\n\r\n\r\n                \r\n               \r\n            </div>\r\n            \r\n        )\r\n    }\r\n}\r\n\r\n\r\nfunction mapStateToProps(state){\r\n    // console.log(state);\r\n    return {\r\n        currentUser: state.currentUser,\r\n        error: state.errors\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, {editUser, removeError, deleteUser, logout})(Settings);","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n// import { forgotPassword } from \"../../Store/Actions/user\";\r\n\r\nclass Forgot extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            email: this.props.currentUser.user.email || \"\"\r\n        }\r\n    }\r\n\r\n    handleChange = e => {\r\n        this.setState({\r\n            [e.target.name] : e.target.value\r\n        })\r\n    }\r\n\r\n    handleSubmit = e => {\r\n        e.preventDefault();\r\n        const { forgotPassword } = this.props;\r\n\r\n        forgotPassword(this.state.email);\r\n\r\n    }\r\n\r\n    render(){\r\n        const { alertMessage } = this.props;\r\n        return (\r\n            <div style={{paddingTop: \"10vh\"}} className=\"row justify-content-center align-items-center\">\r\n                <div className=\"col-12 col-lg-8 text-center\">\r\n                    {alertMessage && (\r\n                        <div className={`alert alert-${alertMessage.type}`} role=\"alert\">\r\n                            {alertMessage.text}\r\n                        </div>\r\n                    )}\r\n                    <h1 className=\"mb-3\">Reset password</h1>\r\n                    <div style={{ width: \"40%\", margin: \"25px auto\"}}>\r\n                        <form onSubmit={this.handleSubmit}>\r\n                            <div className=\"form-group\">\r\n                                <input \r\n                                    onChange={this.handleChange} \r\n                                    value={this.state.email} \r\n                                    className=\"form-control\" \r\n                                    type=\"text\" name=\"email\" \r\n                                    placeholder=\"Email\" \r\n                                    required \r\n                                    autofocus \r\n                                /> \r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <button className=\"btn btn-primary btn-block\">Resset Password</button>\r\n                            </div>\r\n                        </form>\r\n                        <hr/>\r\n                        <Link className=\"float-left\" to=\"/\">Back Home</Link>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Forgot;","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass Reset extends React.Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            password: \"\",\r\n            password2: \"\"\r\n        }\r\n    }\r\n\r\n    handleChange = e => {\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        });\r\n    }\r\n\r\n    handleSubmit = e => {\r\n        e.preventDefault();\r\n        const { password, password2 } = this.state;\r\n        this.props.updatePassword({password, password2}, this.props.match.params.token);\r\n    }\r\n\r\n    render(){\r\n        const { password, password2 } = this.state;\r\n        const { alertMessage } = this.props;\r\n\r\n        return (\r\n            <div style={{paddingTop: \"10vh\"}} className=\"row justify-content-center align-content-center\">\r\n                <div className=\"col-12 col-lg-8 text-center\">\r\n                    {alertMessage && (\r\n                        <div className={`alert alert-${alertMessage.type}`} role=\"alert\">\r\n                            {alertMessage.text}\r\n                        </div>\r\n                    )}\r\n                    <h1 className=\"mb-3\">Reset password</h1>\r\n                    <div style={{ width: \"40%\", margin: \"25px auto\"}}>\r\n                        <form onSubmit={this.handleSubmit}>\r\n                            <div className=\"form-group\">\r\n                                <input \r\n                                    onChange={this.handleChange} \r\n                                    value={password} \r\n                                    className=\"form-control\" \r\n                                    type=\"password\" \r\n                                    name=\"password\" \r\n                                    placeholder=\"New Password\" \r\n                                    required \r\n                                    autofocus\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <input \r\n                                    onChange={this.handleChange} \r\n                                    value={password2} \r\n                                    className=\"form-control\"\r\n                                    type=\"password\" \r\n                                    name=\"password2\" \r\n                                    placeholder=\"Confirm Password\" \r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <button className=\"btn btn-primary btn-block\">Update Password</button>\r\n                            </div>\r\n                        </form>\r\n\r\n                        <hr/>\r\n                        <Link className=\"float-left\" to=\"/\">Back Home</Link>\r\n\r\n                       \r\n                    </div>\r\n                </div>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Reset;","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass Sidemenu extends React.Component{\r\n    \r\n    handleClick = e => {\r\n        e.preventDefault();\r\n        this.props.toggleSidemenu(false);\r\n    }\r\n\r\n    render(){\r\n        const { toggle, currentUser }  = this.props;\r\n        return (\r\n            <div>\r\n                {toggle && (\r\n                    <div className=\"sidemenu\">\r\n                        <ul>\r\n                            <li onClick={this.handleClick}><i className=\"fa fa-home\" aria-hidden=\"true\"></i><Link to=\"/\">Home</Link></li>\r\n                            <li onClick={this.handleClick}><i className=\"fa fa-cog\" aria-hidden=\"true\"></i><Link to=\"/settings\">Settings</Link></li>\r\n                            <li onClick={this.handleClick}><i className=\"fa fa-user\" aria-hidden=\"true\"></i><Link to={`/users/${currentUser.user.username}`}>View Profile</Link></li>\r\n                        </ul>\r\n                    </div>\r\n                )}\r\n            </div>\r\n            \r\n            \r\n        )\r\n    }\r\n}\r\n\r\nexport default Sidemenu;","import React from \"react\";\r\nimport { Switch, Route, withRouter, Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport Homepage from \"../Components/Homepage\";\r\nimport AuthForm from \"../Components/AuthForm\";\r\nimport { authUser, updatePassword } from \"../Store/Actions/auth\";\r\nimport { checkUserNotification, deleteNotification, fetchFollowers, getAllUsers, forgotPassword } from \"../Store/Actions/user\"\r\nimport { toggleSidemenu } from \"../Store/Actions/toggle\";\r\nimport { removeError } from \"../Store/Actions/errors\";\r\nimport withAuth  from \"../Hocs/withAuth\";\r\nimport MessageForm from \"../Containers/MessageForm\";\r\nimport UserShow from \"../Components/UserShow\";\r\nimport Chat from \"../Containers/Chat\";\r\nimport Settings from \"../Containers/Settings\";\r\nimport Forgot from \"../Components/PasswordReset/Forgot\";\r\nimport Reset from \"../Components/PasswordReset/Reset\";\r\nimport Sidemenu from \"../Components/Sidemenu\";\r\nimport { store } from 'react-notifications-component';\r\nimport 'react-notifications-component/dist/theme.css';\r\nimport \"animate.css\"\r\n\r\n\r\nclass Main extends React.Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            id: 0\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        const { deleteNotification, currentUser, checkUserNotification, fetchFollowers, getAllUsers } = this.props;\r\n        \r\n        getAllUsers();\r\n\r\n        const username = currentUser.user.username;\r\n        if(currentUser.user.id){\r\n            fetchFollowers(currentUser.user.id);\r\n\r\n\r\n\r\n            setInterval(() => {\r\n                //get the path -> run the checkNotification function every time he is not chatting with somebody\r\n                const path = window.location.pathname.split(\"/\")[1];\r\n                if(path !== \"chat\"){\r\n                    checkUserNotification(username).then(() => {\r\n                        const notification = this.props.notifications;\r\n                        const from = notification.from;\r\n                        const id = this.state.id;\r\n                        // if(notification && from && (id >= 0 && id <= 1)){\r\n                        if(notification && from && (id === 0)){\r\n                            let idStore = store.addNotification({\r\n                                title: `${from} want to connect!`,\r\n                                message: <Link onClick={() => deleteNotification(username)} style={{color: \"white\"}} to={`/chat/${from}`}>Click here to chat!</Link>,\r\n                                type: \"info\",\r\n                                insert: \"top\",\r\n                                container: \"top-right\",\r\n                                animationIn: [\"animated\", \"fadeIn\"],\r\n                                animationOut: [\"animated\", \"fadeOut\"],\r\n                                dismiss: {\r\n                                    duration: 0,\r\n                                    //   onScreen: true,\r\n                                    showIcon: true,\r\n                                    //   pauseOnHover: true\r\n                                },\r\n                                onRemoval: () => {\r\n                                    deleteNotification(username);\r\n                                    this.setState({id: 0});\r\n                                }\r\n                            });\r\n                            this.setState({id: idStore});\r\n                        }\r\n                    });\r\n                }\r\n            }, 4000);\r\n    \r\n        }\r\n        \r\n        \r\n        \r\n    }\r\n\r\n    render(){\r\n        const { authUser, errors, removeError, currentUser, forgotPassword, updatePassword, toggle, toggleSidemenu } = this.props;\r\n\r\n        return ( \r\n            <div> \r\n                {currentUser.isAuthenticated && (\r\n                    <Sidemenu  toggleSidemenu={toggleSidemenu} toggle={toggle} currentUser={currentUser}/>\r\n                )} \r\n                \r\n                <div className=\"container\">\r\n                   \r\n                    <Switch>\r\n                        <Route exact path=\"/\" render={props => <Homepage currentUser={currentUser} {...props} />} />\r\n                        <Route \r\n                            exact \r\n                            path=\"/signin\" \r\n                            render={props => {\r\n                                return(\r\n                                    <AuthForm \r\n                                        removeError={removeError}\r\n                                        errors={errors}\r\n                                        onAuth={authUser}\r\n                                        buttonText=\"Log in\" \r\n                                        heading =\"Welcome Back\" \r\n                                        {...props}\r\n                                        \r\n                                    />\r\n                                ) \r\n                        }}/>\r\n                        <Route \r\n                            exact \r\n                            path=\"/signup\" \r\n                            render={props => {\r\n                                return(\r\n                                    <AuthForm \r\n                                        removeError={removeError}\r\n                                        errors={errors}\r\n                                        onAuth={authUser}\r\n                                        signUp\r\n                                        buttonText=\"Sign up\" \r\n                                        heading =\"Join Now\" \r\n                                        {...props}\r\n                                    />\r\n                                )\r\n                        }}/>\r\n                        <Route \r\n                            exact\r\n                            path=\"/forgot\"\r\n                            render={props => {\r\n                                return (\r\n                                    <Forgot \r\n                                        currentUser={currentUser} \r\n                                        forgotPassword={forgotPassword} \r\n                                        alertMessage={errors.message}\r\n                                        {...props}\r\n                                    />\r\n                                )\r\n                            }}\r\n                        />\r\n                        <Route \r\n                            exact\r\n                            path=\"/reset/:token\"\r\n                            render={props => {\r\n                                return (\r\n                                    <Reset \r\n                                        updatePassword={updatePassword}\r\n                                        alertMessage={errors.message}\r\n                                        {...props}\r\n                                    />\r\n                                )\r\n                            }}\r\n                        />\r\n                        <Route \r\n                            exact\r\n                            path=\"/users/:id/messages/new\" \r\n                            component={withAuth(MessageForm)} \r\n                        />\r\n                        <Route \r\n                            exact\r\n                            path=\"/users/:username\"\r\n                            render={props => (<UserShow  currentUser={currentUser} {...props}/>)}\r\n                            key={window.location.pathname}\r\n                        />\r\n                        <Route\r\n                            exact\r\n                            path=\"/chat/:username\"\r\n                            // render={props => (<Chat {...props} />)}\r\n                            component={withAuth(Chat)}\r\n                        />\r\n                        <Route \r\n                            exact\r\n                            path=\"/settings\"\r\n                            component={withAuth(Settings)}\r\n                        />\r\n                    </Switch>\r\n        \r\n                    \r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state){\r\n    return {\r\n        currentUser: state.currentUser,\r\n        errors: state.errors,\r\n        notifications: state.notifications,\r\n        toggle: state.toggleSidemenu.toggle\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, {\r\n    authUser, \r\n    updatePassword,\r\n    removeError, \r\n    checkUserNotification, \r\n    deleteNotification, \r\n    fetchFollowers, \r\n    getAllUsers,\r\n    forgotPassword,\r\n    toggleSidemenu,\r\n})(Main));\r\n\r\n\r\n","import React from 'react';\nimport { Provider } from \"react-redux\";\nimport { configureStore } from \"../Store/index\";\nimport { BrowserRouter as Router} from \"react-router-dom\";\nimport Navbar from \"./Navbar\";\nimport Main from \"./Main\";\nimport { setAuthorizationToken, setCurrentUser } from '../Store/Actions/auth';\nimport jwtDecode from \"jwt-decode\";\nimport Notifications from 'react-notifications-component';\n\n\nconst store = configureStore();\n\nif(localStorage.jwtToken){\n  setAuthorizationToken(localStorage.jwtToken);\n  try {\n    store.dispatch(setCurrentUser(jwtDecode(localStorage.jwtToken)));\n  } catch (error) {\n    store.dispatch(setCurrentUser({}));\n  }\n}\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <Router>\n        <div className=\"onboarding\">\n          <Notifications isMobile={true} className=\"mt-md-4\"/>\n          <Navbar />\n          <Main />\n        </div>\n      </Router>\n      \n    </Provider>\n\n  );\n}\n\nexport default App;\n","import rootReducer from \"./Reducers/index\";\r\nimport { createStore, applyMiddleware, compose } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\n\r\n\r\nexport function configureStore(){\r\n    const store = createStore(rootReducer, compose(applyMiddleware(thunk)));\r\n\r\n    return store;\r\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './Containers/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}