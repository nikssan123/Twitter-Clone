(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{216:function(e,t,a){e.exports=a.p+"static/media/warbler-logo.25398cf7.png"},227:function(e,t,a){e.exports=a(467)},232:function(e,t,a){},272:function(e,t){},274:function(e,t){},288:function(e,t){},290:function(e,t){},318:function(e,t){},320:function(e,t){},321:function(e,t){},327:function(e,t){},329:function(e,t){},347:function(e,t){},350:function(e,t){},36:function(e,t){e.exports="data:image/jpeg;base64,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"},366:function(e,t){},369:function(e,t){},412:function(e,t){},467:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(42),A=a.n(s),o=(a(232),a(22)),c=a(48),l=a(6),i=a(30),u={isAuthenticated:!1,user:{},chatMessages:{from:"",messages:[]},following:[]};var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_MESSAGES":return[].concat(Object(i.a)(e),Object(i.a)(t.messages));case"REMOVE_MESSAGES":return[];case"REMOVE_MESSAGE":return e.filter((function(e){return e._id!==t.id}));default:return e}},d={user:{},messages:[]};var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_USER_INFO":return{user:t.user,messages:t.messages};case"DELETE_USER_MESSAGE":var a=e.messages.filter((function(e){return e._id!==t.id}));return Object(l.a)(Object(l.a)({},e),{},{messages:a});default:return e}},f={users:[]};var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_USERS":return{users:Object(i.a)(t.users)};default:return e}},g={from:""};var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_NOTIFICATION":return{from:t.from};default:return e}};var b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{toggle:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_SIDEMENU":return{toggle:t.toggle};default:return e}},v=Object(c.c)({currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return{isAuthenticated:Boolean(Object.keys(t.user).length),user:t.user};case"NEW_CHAT_MESSAGE":var a={from:t.from,messages:[].concat(Object(i.a)(e.chatMessages.messages),[t.newMessage])};return Object(l.a)(Object(l.a)({},e),{},{chatMessages:a});case"SET_FOLLOWING":return Object(l.a)(Object(l.a)({},e),{},{following:Object(i.a)(t.followers)});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{message:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ERROR":return Object(l.a)(Object(l.a)({},e),{},{message:t.error});case"REMOVE_ERROR":return Object(l.a)(Object(l.a)({},e),{},{message:null});default:return e}},messages:m,user:h,users:p,notifications:E,toggleSidemenu:b}),w=a(215);var y=a(3),N=a(8),j=a(9),O=a(13),U=a(12),x=a(216),S=a.n(x),M=a(126),k=a(93),C=a.n(k);function R(e,t,a){return new Promise((function(n,r){return C.a[e.toLowerCase()](t,a).then((function(e){return n(e.data)})).catch((function(e){if(e.response)return r(e.response.data.error)}))}))}var P=function(e){return{type:"ADD_ERROR",error:e}},T=function(){return{type:"REMOVE_ERROR"}};function F(e){return{type:"SET_CURRENT_USER",user:e}}function H(e){!function(e){e?C.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete C.a.defaults.headers.common.Authorization}(e)}function D(){return function(e){localStorage.clear(),H(!1),e(F({}))}}function L(e){return{type:"TOGGLE_SIDEMENU",toggle:e}}var V=function(e){Object(O.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(N.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).logout=function(t){t.preventDefault(),e.props.logout()},e.toggle=function(t){t.preventDefault(),e.props.toggleSidemenu(!e.props.toggle)},e}return Object(j.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("nav",{className:"navbar navbar-expand"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"navbar-header"},this.props.currentUser.isAuthenticated&&r.a.createElement("div",{className:"toggle d-block d-md-none ".concat(this.props.toggle?"active":null),onClick:this.toggle}," "),r.a.createElement(y.b,{to:"/",className:"navbar-brand",onClick:function(t){return e.props.toggleSidemenu(!1)}},r.a.createElement("img",{src:S.a,alt:"Home"}))),this.props.currentUser.isAuthenticated?r.a.createElement("ul",{className:"nav navbar-nav navbar-right"},r.a.createElement("li",null,r.a.createElement(y.b,{to:"/users/".concat(this.props.currentUser.user.id,"/messages/new")},"New Message")),r.a.createElement("li",null,r.a.createElement("a",{onClick:this.logout},"Log out"))):r.a.createElement("ul",{className:"nav navbar-nav navbar-right"},r.a.createElement("li",null,r.a.createElement(y.b,{to:"/signup"},"Sign up")),r.a.createElement("li",null,r.a.createElement(y.b,{to:"/signin"},"Sign in")))))}}]),a}(r.a.Component);var z=Object(o.b)((function(e){return{currentUser:e.currentUser,toggle:e.toggleSidemenu.toggle}}),{logout:D,toggleSidemenu:L})(V),I=a(17),B=a(88),Y=a.n(B),q=a(36),Z=a.n(q),W=function(e){var t=e.date,a=e.profileImageUrl,n=e.text,s=e.username,A=e.removeMessage,o=e.isCorrectUser,c="/users/".concat(s);return r.a.createElement("div",null,r.a.createElement("li",{className:"list-group-item"},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("img",{src:a||Z.a,alt:s,height:"100",width:"100",className:"timeline-image"}),r.a.createElement("div",{className:"message-area"},r.a.createElement(y.b,{to:c},"@",s," "),r.a.createElement("span",{className:"text-muted"},r.a.createElement(Y.a,{className:"text-muted",format:"Do MMM YYYY"},t)),r.a.createElement("p",null,n))),r.a.createElement("div",null,o&&r.a.createElement("a",{className:"btn btn-danger float-right text-right",onClick:A},"X"))))},X=a(217),G=a.n(X),J=a(226),Q={input:{width:"100%",height:"50px",padding:"10px",border:"1px solid #0084FF",borderTopLeftRadius:"18px",borderTopRightRadius:"18px",borderBottomLeftRadius:"18px",borderBottomRightRadius:"18px",outline:"none"},inputOpen:{borderBottomLeftRadius:0,borderBottomRightRadius:0},container:{margin:"20px 0"},suggestionsContainerOpen:{backgroundColor:"#fff",borderLeft:"1px solid #0084FF",borderRight:"1px solid #0084FF",borderBottom:"1px solid #0084FF",borderBottomLeftRadius:"18px",borderBottomRightRadius:"18px",color:"black"},suggestionsList:{listStyleType:"none",padding:0},suggestion:{cursor:"pointer",padding:"10px 20px"},suggestionHighlighted:{backgroundColor:"#ddd"}},K=function(e){Object(O.a)(a,e);var t=Object(U.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).getSuggestions=function(e){return n.searcher.search(e.trim())},n.getSuggestionValue=function(e){return e.username},n.renderSuggestion=function(e){return r.a.createElement("div",{onClick:function(){return n.redirect(e.username)}},r.a.createElement("img",{style:{borderRadius:"18px",marginRight:"5px"},width:"25",height:"25",src:e.profileImageUrl||Z.a,alt:"user"}),r.a.createElement(y.b,{to:"/users/".concat(e.username)},e.username))},n.onChange=function(e,t){var a=t.newValue;n.setState({value:a})},n.onSuggestionsFetchRequested=function(e){var t=e.value;n.setState({suggestions:n.getSuggestions(t)})},n.onSuggestionsClearRequested=function(){n.setState({suggestions:[]})},n.state={value:"",suggestions:[]},n}return Object(j.a)(a,[{key:"redirect",value:function(e){this.props.history.push("/users/".concat(e))}},{key:"render",value:function(){var e=this.state,t=e.value,a=e.suggestions;this.searcher=new J.a(this.props.users,["username"],{caseSensitive:!1});var n={placeholder:"Search for a user...",value:t,onChange:this.onChange};return r.a.createElement("div",null,r.a.createElement(G.a,{suggestions:a,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:this.getSuggestionValue,renderSuggestion:this.renderSuggestion,inputProps:n,theme:Q}))}}]),a}(r.a.Component),_=function(e){Object(O.a)(a,e);var t=Object(U.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).handleScroll=function(e){var t=document.querySelector("#dummy");window.scrollY>=t.offsetTop-window.innerHeight&&n.loadData()},n.state={pageNumber:1,isLoading:!1,hasMore:!0,messages:[]},n}return Object(j.a)(a,[{key:"componentDidMount",value:function(){this.loadData(),window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll),this.props.removeMessages()}},{key:"loadData",value:function(){var e=this;this.state.hasMore&&!this.state.isLoading&&(this.setState({isLoading:!0}),this.props.fetchMessages(this.state.pageNumber).then((function(t){var a=!t||0!==t.length;e.setState({isLoading:!1,pageNumber:e.state.pageNumber+1,hasMore:a})})))}},{key:"render",value:function(){var e=this,t=this.props,a=t.messages,n=t.removeMessage,s=t.currentUser,A=t.history,o=t.users,c=a.map((function(t){return r.a.createElement(W,{key:t._id,date:t.createAt,text:t.text,username:t.user.username,profileImageUrl:t.user.profileImageUrl,removeMessage:n.bind(e,t.user._id,t._id),isCorrectUser:s.id===t.user._id})}));return r.a.createElement("div",{className:"row col-md-8"},r.a.createElement("div",{className:"offset-1 col-sm-10"},r.a.createElement(K,{history:A,users:o}),r.a.createElement("ul",{className:"list-group",id:"messages"},c),this.state.isLoading&&r.a.createElement("div",{className:"loader",style:{display:"flex",justifyContent:"center",marginTop:"10px"}},r.a.createElement("div",{className:"bounce1"}),r.a.createElement("div",{className:"bounce2"}),r.a.createElement("div",{className:"bounce3"})),r.a.createElement("div",{id:"dummy",style:{height:"20px"}})))}}]),a}(r.a.Component);var $=Object(o.b)((function(e){return{messages:e.messages,currentUser:e.currentUser.user,users:e.users.users}}),{fetchMessages:function(e){return function(t){return new Promise((function(a,n){return R("get","/api/messages/".concat(e)).then((function(e){t({type:"LOAD_MESSAGES",messages:e}),a(e)})).catch((function(e){t(P(e.message)),n()}))}))}},removeMessage:function(e,t){return function(a){return R("delete","/api/users/".concat(e,"/messages/").concat(t)).then((function(){return a({type:"REMOVE_MESSAGE",id:t})})).catch((function(e){return a(P(e.message))}))}},removeMessages:function(){return{type:"REMOVE_MESSAGES"}}})(_),ee=a(60),te=a(469),ae=function(e){var t,a=e.profileImageUrl,s=e.username,A=e.followers,o=Object(n.useState)(!1),c=Object(ee.a)(o,2),l=c[0],i=c[1],u=function(e){i(!1)};return t=A&&A.length>0?A.map((function(e){return r.a.createElement("li",{key:e._id,style:{listStyle:"none"}},r.a.createElement("img",{style:{borderRadius:"18px",marginRight:"5px"},width:"25",height:"25",src:e.profileImageUrl||Z.a,alt:"user"}),r.a.createElement(y.b,{to:"/users/".concat(e.username)},e.username))})):r.a.createElement("em",null,"You are not following anyone!"),r.a.createElement("aside",{className:"col-3 d-none d-md-block"},r.a.createElement("div",{className:"card user-sidebar"},r.a.createElement("img",{width:"200",height:"253",className:"card-img-top",src:a||Z.a,alt:"Card backgound cap"}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},s),r.a.createElement("div",{className:"mb-2",style:{display:"block"}},r.a.createElement("strong",{style:{color:"#007bff",cursor:"pointer"}}," ",r.a.createElement("a",{onClick:function(e){return i(!0)}},"Following: ")),r.a.createElement("span",{className:"badge badge-secondary"},t.length||0)),r.a.createElement("div",null,r.a.createElement(y.b,{to:"/settings"},r.a.createElement("i",{className:"mr-1 fa fa-cog","aria-hidden":"true"}),"Settings")),r.a.createElement(y.b,{style:{paddingBottom:"10px"},to:"/users/".concat(s)},r.a.createElement("i",{className:"mr-1 fa fa-user","aria-hidden":"true"}),"View Profile"))),r.a.createElement(te.a,{show:l,onHide:u},r.a.createElement(te.a.Header,{closeButton:!0},r.a.createElement(te.a.Title,null,"You are following:")),r.a.createElement(te.a.Body,null,r.a.createElement("p",null,r.a.createElement("strong",null,"Following:")),r.a.createElement("ul",null,t)),r.a.createElement(te.a.Footer,null,r.a.createElement("button",{onClick:u,type:"button",className:"btn btn-danger","data-dismiss":"modal"},"Close"))))},ne=function(e){var t=e.profileImageUrl,a=e.username,n=e.followers,s=e.history;return r.a.createElement("div",{className:"row"},r.a.createElement(ae,{profileImageUrl:t,username:a,followers:n}),r.a.createElement($,{history:s}))},re=function(e){var t=e.currentUser,a=e.history;return t.isAuthenticated?r.a.createElement("div",null,r.a.createElement(ne,{history:a,profileImageUrl:t.user.profileImageUrl,username:t.user.username,followers:t.following})):r.a.createElement("div",{className:"home-hero"},r.a.createElement("h1",null,"What's Happening?"),r.a.createElement("h4",null,"New To Warbler?"),r.a.createElement(y.b,{to:"/signup",className:"btn btn-primary"},"Sign Up"))},se=a(35),Ae=a(28),oe=(a(268),function(e){Object(O.a)(a,e);var t=Object(U.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).state={email:"",username:"",password:""},n.handleChange=n.handleChange.bind(Object(Ae.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(Ae.a)(n)),n}return Object(j.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(se.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this,a=this.props.signUp?"signup":"signin";this.props.onAuth(a,this.state).then((function(){t.props.history.push("/")})).catch((function(){})),e.preventDefault()}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.username,n=this.props,s=n.heading,A=n.buttonText,o=n.signUp,c=n.errors,l=n.history,i=n.removeError;return l.listen((function(){i()})),r.a.createElement("div",null,r.a.createElement("div",{style:{paddingTop:"10vh"},className:"row justify-content-center align-content-center"},r.a.createElement("div",{className:"col-12 col-lg-8 text-center"},c.message&&r.a.createElement("div",{className:"alert alert-danger"},c.message),r.a.createElement("h2",null,s),r.a.createElement("div",{style:{width:"40%",margin:"25px auto"}},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{required:!0,autoFocus:!0,type:"email",className:"form-control",id:"email",name:"email",onChange:this.handleChange,value:t,placeholder:"Email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",required:!0,className:"form-control",id:"password",name:"password",onChange:this.handleChange,placeholder:"Password"})),o&&r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",id:"username",name:"username",onChange:this.handleChange,value:a,placeholder:"Username"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn mt-4 btn-primary btn-block"},A)),r.a.createElement("hr",null),o?r.a.createElement(y.b,{className:"float-left",to:"/signin"},"Already have an account?"):r.a.createElement("div",null,r.a.createElement(y.b,{className:"float-left",to:"/forgot"},"Forgot your password?"),r.a.createElement(y.b,{className:"float-left",to:"/signup"},"Don't have an account?")))))))}}]),a}(r.a.Component)),ce=function(e){return function(t){return R("put","/api/users/".concat(e)).then((function(e){return e})).catch((function(e){t(P(e))}))}};function le(e,t){var a=function(a){Object(O.a)(s,a);var n=Object(U.a)(s);function s(){return Object(N.a)(this,s),n.apply(this,arguments)}return Object(j.a)(s,[{key:"componentDidMount",value:function(){!1===this.props.isAuthenticated&&this.props.history.push("/signin")}},{key:"componentDidUpdate",value:function(e){!1===e.isAuthenticated&&this.props.history.push("/signin")}},{key:"render",value:function(){return r.a.createElement(e,Object.assign({},this.props,{socket:t}))}}]),s}(r.a.Component);return Object(o.b)((function(e){return{isAuthenticated:e.currentUser.isAuthenticated}}))(a)}var ie=function(e){Object(O.a)(a,e);var t=Object(U.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).state={message:""},n.handleNewMessage=n.handleNewMessage.bind(Object(Ae.a)(n)),n}return Object(j.a)(a,[{key:"handleNewMessage",value:function(e){e.preventDefault(),this.props.postNewMessage(this.state.message),this.setState({message:""}),this.props.history.push("/")}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:this.handleNewMessage},this.props.errors.message&&r.a.createElement("div",{className:"alert alert-danger"},this.props.errors.message),r.a.createElement("textarea",{style:{resize:"none"},rows:5,placeholder:"Enter your message...",type:"text",className:"form-control",value:this.state.message,onChange:function(t){return e.setState({message:t.target.value})}}),r.a.createElement("button",{style:{marginTop:"20px"},className:"btn btn-success pull-right",type:"submit"},"Add New Message"))}}]),a}(r.a.Component);var ue=Object(o.b)((function(e){return{errors:e.errors}}),{postNewMessage:function(e){return function(t,a){var n=a().currentUser.user.id;return R("post","/api/users/".concat(n,"/messages"),{text:e}).then((function(e){})).catch((function(e){return t(P(e.message))}))}}})(ie),me=function(e){Object(O.a)(a,e);var t=Object(U.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e))._isMountedCheck=!1,n.setInfoState=function(e){n.setState(e,(function(){setTimeout((function(){n.setState(Object(l.a)(Object(l.a)({},n.state),{},{infoMessage:"",error:""}))}),5e3)}))},n.handleClose=function(e){n.setState({showModal:!1})},n.state={infoMessage:"",error:"",isFollowing:!1,followers:0,followersList:[],showModal:!1},n.handleFollow=n.handleFollow.bind(Object(Ae.a)(n)),n.handleUnfollow=n.handleUnfollow.bind(Object(Ae.a)(n)),n.handleDeleteMessage=n.handleDeleteMessage.bind(Object(Ae.a)(n)),n}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMountedCheck=!0;var t=this.props.match.params.username;this.props.fetchUserInfo(t).then((function(){var t=e.props,a=t.user,n=t.currentUser;0===Object.keys(a).length&&e.props.history.push("/"),a.followers&&a.followers.forEach((function(t){t._id===n.user.id&&e._isMountedCheck&&e.setState(Object(l.a)(Object(l.a)({},e.state),{},{isFollowing:!0}))})),e._isMountedCheck&&e.setState(Object(l.a)(Object(l.a)({},e.state),{},{followers:a.followers.length,followersList:a.followers}))}))}},{key:"componentWillUnmount",value:function(){this._isMountedCheck=!1}},{key:"handleFollow",value:function(e,t){var a=this;this.props.followUser(e.username,t.user.id).then((function(e){var t=a.state.followers+1;a.setInfoState({isFollowing:!0,infoMessage:"You succesfully followed ".concat(e[0].username),followers:t})})).catch((function(e){a.setState(Object(l.a)(Object(l.a)({},a.state),{},{error:"Something went wrong! Try again later!"}))}))}},{key:"handleUnfollow",value:function(e,t){var a=this;this.props.unfollowUser(e.username,t.user.id).then((function(e){var t=a.state.followers-1;a.setInfoState({isFollowing:!1,infoMessage:"You succesfully unfollowed ".concat(e[0].username),followers:t})})).catch((function(e){a.setInfoState(Object(l.a)(Object(l.a)({},a.state),{},{error:"Something went wrong! Try again later!"}))}))}},{key:"handleDeleteMessage",value:function(e,t){var a=this;this.props.deleteMessage(e,t).then((function(){a.setInfoState(Object(l.a)(Object(l.a)({},a.state),{},{infoMessage:"You successfully deleted the message!"}))}))}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.currentUser,s=a.user,A=a.messages,o=n.user.id===s._id,c=A.reverse().map((function(e){return r.a.createElement(W,{key:e._id,date:e.createdAt,text:e.text,username:s.username,profileImageUrl:s.profileImageUrl,removeMessage:function(){return t.handleDeleteMessage(e.user,e._id)},isCorrectUser:n.user.id===e.user})}));e=this.state.followersList.length>0?this.state.followersList.map((function(e){return r.a.createElement("li",{key:e._id,style:{listStyle:"none"}},r.a.createElement("img",{style:{borderRadius:"18px",marginRight:"5px"},width:"25",height:"25",src:e.profileImageUrl||Z.a,alt:"user"}),r.a.createElement(y.b,{to:"/users/".concat(e.username)},e.username))})):r.a.createElement("em",null,"No followers yet");var l=n.isAuthenticated?"row col-md-8":"row col-sm-12";return r.a.createElement("div",{className:l},r.a.createElement("div",{className:"col-sm-12"},this.state.infoMessage&&r.a.createElement("div",{className:this.state.error?"alert alert-danger":"alert alert-success"},this.state.infoMessage),r.a.createElement("div",{className:"show-user"},r.a.createElement("div",{className:"cover"},r.a.createElement("img",{className:"user-avatar",height:"200",width:"200",src:s.profileImageUrl||Z.a,alt:s.username})),r.a.createElement("p",null,"@",s.username),r.a.createElement("div",{className:"followers"},r.a.createElement("div",null,r.a.createElement("span",{className:"email"},s.email),r.a.createElement("strong",{style:{color:"#007bff",cursor:"pointer"}}," ",r.a.createElement("a",{onClick:function(e){return t.setState({showModal:!0})}},"Followers: ")),r.a.createElement("span",{className:"badge badge-secondary"},this.state.followers)),r.a.createElement("div",null,r.a.createElement("div",{className:"links"},n&&o&&r.a.createElement(y.b,{style:{fontSize:"18px"},to:"/settings"},r.a.createElement("i",{className:"mr-1 fa fa-cog","aria-hidden":"true"}),"Settings"),n&&!o&&r.a.createElement(y.b,{className:"mb-3",to:"/chat/".concat(s.username)},"Direct Message"),n&&!o&&(this.state.isFollowing?r.a.createElement("button",{onClick:function(){t.handleUnfollow(s,n)},className:"btn btn-primary "},"Unfollow"):r.a.createElement("button",{onClick:function(){t.handleFollow(s,n)},className:"btn btn-primary "},"Follow")))))),0===c.length?r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("em",null,"No posts yet!")):r.a.createElement("ul",{className:"list-group",id:"messages"},c)),r.a.createElement(te.a,{show:this.state.showModal,onHide:this.handleClose},r.a.createElement(te.a.Header,{closeButton:!0},r.a.createElement(te.a.Title,null,"Followers of ",s.username)),r.a.createElement(te.a.Body,null,r.a.createElement("p",null,r.a.createElement("strong",null,"Followed by:")),r.a.createElement("ul",null,e)),r.a.createElement(te.a.Footer,null,r.a.createElement("button",{onClick:this.handleClose,type:"button",className:"btn btn-danger","data-dismiss":"modal"},"Close"))))}}]),a}(r.a.Component);var de=Object(o.b)((function(e){return{currentUser:e.currentUser,user:e.user.user,messages:e.user.messages,users:e.users}}),{fetchUserInfo:function(e){return function(t){return R("get","/api/users/".concat(e)).then((function(e){var a,n;t((a=e[0],n=e[0].messages,{type:"SHOW_USER_INFO",user:a,messages:n}))})).catch((function(e){t(P(e))}))}},followUser:function(e,t){return function(a){return new Promise((function(n,r){return R("put","/api/users/".concat(e,"/follow/").concat(t)).then((function(e){return n(e)})).catch((function(e){return a(P(e)),r()}))}))}},unfollowUser:function(e,t){return function(a){return new Promise((function(n,r){return R("put","/api/users/".concat(e,"/unfollow/").concat(t)).then((function(e){return n(e)})).catch((function(e){return a(P(e)),r()}))}))}},deleteMessage:function(e,t){return function(a){return R("delete","/api/users/".concat(e,"/messages/").concat(t)).then((function(){a({type:"DELETE_USER_MESSAGE",id:t})})).catch((function(e){return a(P(e.message))}))}}})(me);var he=function(e){return r.a.createElement("div",{className:"row"},e.currentUser.isAuthenticated&&r.a.createElement(ae,{profileImageUrl:e.currentUser.user.profileImageUrl,username:e.currentUser.user.username,followers:e.currentUser.following}),r.a.createElement(de,e))},fe=a(222),pe=a.n(fe),ge=a(223),Ee=a.n(ge),be=(a(85),function(e){var t=e.from,a=e.text,n=e.user,s=e.created,A="outgoing"===t?{display:"flex",justifyContent:"flex-end"}:{display:"flex",justifyContent:"flex-start"};return r.a.createElement("div",{className:"message-row ".concat(t)},"received"===t&&r.a.createElement("div",{className:"text-muted",style:{padding:"0px 10px",fontWeight:"bold"}},n),r.a.createElement("div",{className:"message-content"},r.a.createElement("div",{className:"message-text"},a)),r.a.createElement("div",{className:"text-muted",style:A}," ",r.a.createElement(Y.a,{fromNow:!0},s)))}),ve=function(e){var t=e.user;return r.a.createElement("div",{className:"chat-header"},r.a.createElement("p",null,t),r.a.createElement(y.b,{style:{color:"white"},to:"/users/".concat(t)},r.a.createElement("i",{className:"fa fa-info-circle"})))},we=a(225),ye=(a(461),function(e){var t=e.value,a=e.onChange,s=e.onKeyUp,A=e.onSubmit,o=e.onEmojiClick,c=Object(n.useState)(!1),l=Object(ee.a)(c,2),i=l[0],u=l[1],m=Object(n.useState)(void 0),d=Object(ee.a)(m,2),h=d[0],f=d[1],p=Object(n.useState)(void 0),g=Object(ee.a)(p,2),E=g[0],b=g[1],v=function(e){var t=window.innerWidth,a=window.innerHeight;t<=991&&t>500?f("60px"):t>991?f("90px"):t<=500&&f("40px"),a>=600?b("50px"):a<=600&&a>470?b("30px"):a<=470&&a>370?b("15px"):a<=370&&b("5px")};return Object(n.useEffect)((function(){return v(),window.addEventListener("resize",v),function(){window.removeEventListener("resize",v)}}),[]),r.a.createElement("div",{className:"chat-input"},r.a.createElement("div",{className:"inputs"},r.a.createElement("input",{value:t,name:"message",onChange:a,onKeyUp:s,type:"text",placeholder:"Enter your message..."}),r.a.createElement("div",{className:"emoji-picker",style:{textAlign:"center",flex:"3%"},onClick:function(){u(!i)}},r.a.createElement("i",{style:{color:"#0084FF",cursor:"pointer",fontSize:"18px"},className:"fa fa-smile-o"}))),r.a.createElement("div",{className:"submit"},r.a.createElement("i",{style:{color:"#0084FF",cursor:"pointer"},className:"fa fa-paper-plane",onClick:A})),i&&r.a.createElement(we.a,{color:"#0084FF",showPreview:!1,title:"Pick your emoji\u2026",emoji:"point_up",style:{position:"absolute",bottom:E,right:h,float:"right"},onSelect:function(e){o(e)}}))}),Ne=function(e){Object(O.a)(a,e);var t=Object(U.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).submitFunction=function(e,t,a){""!==(e=e.trim())&&(n.props.addMessageNotification(a,t),R("put","/api/chats/".concat(n.state.roomId),{from:t,message:e}).then((function(e){})),n.setState({messages:[].concat(Object(i.a)(n.state.messages),[{message:e,user:t}]),message:""}),n.socket.emit("private-message",{to:a,message:e,user:t}))},n.handleChange=function(e){n.setState(Object(l.a)(Object(l.a)({},n.state),{},Object(se.a)({},e.target.name,e.target.value)))},n.handleScroll=function(e){var t=n.props,a=t.currentUser,r=t.match.params.username,s=e.target.className;if(0===e.target.scrollTop&&"emoji-mart-scroll"!==s){var A={username:a.user.username,receiver:r,pageNumber:n.state.pageNumber};n.loadChat(A)}},n.handleEmojiClick=function(e){n.setState(Object(l.a)(Object(l.a)({},n.state),{},{message:n.state.message+e.native}))},n.state={message:"",messages:[],roomId:"",pageNumber:1,isLoading:!1,hasMore:!0},n.socket=n.props.socket,n.handleClick=n.handleClick.bind(Object(Ae.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(Ae.a)(n)),n}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=window.location.protocol+"//"+window.location.hostname,a=this.props,n=a.currentUser,r=a.match.params.username;this.socket=pe.a.connect(t);var s={username:n.user.username,to:r};this.socket.emit("register",s),this.socket.on("private-message",(function(t){var a=t.message,n=t.user;e.setState({messages:[].concat(Object(i.a)(e.state.messages),[{message:a,user:n,received:!0}])})}));var A={username:n.user.username,receiver:r,pageNumber:this.state.pageNumber};this.loadChat(A)}},{key:"loadChat",value:function(e){var t=this;!this.state.isLoading&&this.state.hasMore&&(this.setState({isLoading:!0}),R("post","/api/chats",e).then((function(a){var n=[];if(void 0!==a[0]){var r=void 0!==(n=a[0].messages.map((function(t){return{message:t.message,user:t.from,received:t.from===e.receiver,created:t.date}})))[0].message;t.setState(Object(l.a)(Object(l.a)({},t.state),{},{roomId:a[0]._id,messages:[].concat(Object(i.a)(n),Object(i.a)(t.state.messages)),pageNumber:t.state.pageNumber+1,isLoading:!1,hasMore:r}))}else t.setState(Object(l.a)(Object(l.a)({},t.state),{},{roomId:a._id,isLoading:!1}))})))}},{key:"handleClick",value:function(e){var t=this.state.message,a=this.props.currentUser.user.username,n=this.props.match.params.username;13===e.keyCode&&t&&this.submitFunction(t,a,n)}},{key:"handleSubmit",value:function(e){var t=this.state.message,a=this.props.currentUser.user.username,n=this.props.match.params.username;this.submitFunction(t,a,n)}},{key:"render",value:function(){var e=this,t=this.props.history.location.pathname.split("/")[2];t===this.props.currentUser.user.username&&this.props.history.push("/");var a=this.state.messages.map((function(e,t){if(void 0!==e.message)return r.a.createElement(be,{key:t,from:e.received?"received":"outgoing",text:e.message,user:e.user,created:e.created})}));return this.props.history.listen((function(){e.socket.disconnect(),e.props.deleteNotification(e.props.currentUser.user.username)})),r.a.createElement("div",{className:"d-flex",style:{height:"90vh"}},this.props.currentUser.isAuthenticated&&r.a.createElement(ae,{profileImageUrl:this.props.currentUser.user.profileImageUrl,username:this.props.currentUser.user.username,followers:this.props.currentUser.following}),r.a.createElement("div",{className:"col-12 col-md-8 offset-md-1 "},r.a.createElement("div",{className:"chat-container",onScroll:this.handleScroll},r.a.createElement(ve,{user:t}),r.a.createElement(Ee.a,null,r.a.createElement("div",{className:"message-list"},!this.state.hasMore&&r.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:"10px 0"}},r.a.createElement("em",null,"No more messages!")),this.state.isLoading&&r.a.createElement("div",{className:"loader",style:{display:"flex",justifyContent:"center",marginTop:"10px"}},r.a.createElement("div",{className:"bounce1"}),r.a.createElement("div",{className:"bounce2"}),r.a.createElement("div",{className:"bounce3"})),a)),r.a.createElement(ye,{value:this.state.message,onChange:this.handleChange,onKeyUp:this.handleClick,onSubmit:this.handleSubmit,onEmojiClick:this.handleEmojiClick}))))}}]),a}(r.a.Component);var je=Object(o.b)((function(e){return{currentUser:e.currentUser}}),{addMessageNotification:function(e,t){return function(a){return R("put","/api/users/".concat(e,"/").concat(t)).then((function(e){return e})).catch((function(e){return a(P(e))}))}},deleteNotification:ce})(Ne),Oe=function(e){Object(O.a)(a,e);var t=Object(U.a)(a);function a(e){var n;Object(N.a)(this,a),(n=t.call(this,e)).handleClose=function(e){n.setState({showModal:!1})},n.handleChange=function(e){n.setState(Object(se.a)({},e.target.name,e.target.value))},n.handleFileInput=function(e){var t=e.target.files[0],a=new FileReader;a.readAsDataURL(t),a.onloadend=function(){n.setState({profilePic:a.result,file:a.result})},a.onerror=function(){console.log("error")}},n.handleDelete=function(e){e.preventDefault(),n.props.deleteUser(n.props.currentUser.user.id).then((function(){n.props.logout(),n.setState({showModal:!1}),n.props.history.push("/")})).catch((function(e){}))},n.handleSubmit=function(e){e.preventDefault();var t={username:n.state.username,email:n.state.email,file:n.state.file};n.props.editUser(t,n.props.currentUser.user.id).then((function(e){}))};var r=n.props.currentUser.user;return n.state={username:r.username,email:r.email,profilePic:r.profileImageUrl||Z.a,file:null,showModal:!1},n}return Object(j.a)(a,[{key:"render",value:function(){var e=this;return this.props.history.listen((function(){e.props.removeError()})),r.a.createElement("div",null,this.props.error.message&&r.a.createElement("div",{className:"alert alert-success",role:"alert"},this.props.error.message),r.a.createElement("div",{className:"row d-flex justify-content-center"},r.a.createElement("div",{className:"col-10"},r.a.createElement("h3",{className:"pt-3"},"Account Settings"),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"px-2 px-md-5 pt-5 card-body"},r.a.createElement("form",{encType:"multipart/form-data",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username",className:"labels"},r.a.createElement("i",{className:"fa fa-user"})," Username: "),r.a.createElement("input",{onChange:this.handleChange,className:"form-control",id:"username",type:"text",name:"username",value:this.state.username})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email",className:"labels"},r.a.createElement("i",{className:"fa fa-envelope"})," Email: "),r.a.createElement("input",{onChange:this.handleChange,className:"form-control",id:"email",type:"email",name:"email",value:this.state.email})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password",className:"labels"},r.a.createElement("i",{className:"fa fa-lock"})," Password: "),r.a.createElement("input",{className:"form-control",id:"password",type:"password",defaultValue:"***********",disabled:!0}),r.a.createElement("small",{id:"password",className:"form-text text-muted"},r.a.createElement(y.b,{to:"/forgot"},"Click here to reset your password"))),r.a.createElement("input",{type:"submit",className:"mt-3 btn btn-primary",defaultValue:"Save changes"}),r.a.createElement("div",{className:"mt-3 float-md-right"},r.a.createElement("button",{onClick:function(t){return e.setState({showModal:!0})},type:"button",className:"btn btn-danger","data-toggle":"modal","data-target":"#deleteForm"},"Delete account"))),r.a.createElement("div",{className:"col-4 text-center",id:"profile-image"},r.a.createElement("img",{height:"250",width:"250",className:"img-fluid",id:"accImage",src:this.state.profilePic,alt:"ProfilePic"}),r.a.createElement("label",{id:"profilePicLabel",className:"btn btn-primary mt-4 btn-sm btn-md-lg",htmlFor:"profilePic"},"Upload Picture"),r.a.createElement("input",{onChange:this.handleFileInput,style:{display:"none"},type:"file",name:"profilePic",id:"profilePic"})))))))),r.a.createElement(te.a,{show:this.state.showModal,onHide:this.handleClose},r.a.createElement(te.a.Header,{closeButton:!0},r.a.createElement(te.a.Title,null,"Delete Account")),r.a.createElement(te.a.Body,null,r.a.createElement("p",null,"Are you sure you want to delete your account?"),r.a.createElement("em",null,"You will lose all associated data to your account!")),r.a.createElement(te.a.Footer,null,r.a.createElement("button",{onClick:this.handleClose,type:"button",className:"btn btn-secondary"},"No"),r.a.createElement("button",{onClick:this.handleDelete,className:"btn btn-danger"},"Yes"))))}}]),a}(r.a.Component);var Ue=Object(o.b)((function(e){return{currentUser:e.currentUser,error:e.errors}}),{editUser:function(e,t){return function(a){return new Promise((function(n,r){return R("put","/api/auth/".concat(t,"/settings"),e).then((function(e){var t=e.token,r=Object(M.a)(e,["token"]);localStorage.setItem("jwtToken",t),H(t),a(F(r)),a(P("You successfully edited your account settings!")),n()})).catch((function(e){a(P(e.message)),r()}))}))}},removeError:T,deleteUser:function(e){return function(t){return new Promise((function(t,a){return R("delete","/api/auth/".concat(e)).then((function(){t()})).catch((function(e){a(e)}))}))}},logout:D})(Oe),xe=function(e){Object(O.a)(a,e);var t=Object(U.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(se.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),(0,n.props.forgotPassword)(n.state.email)},n.state={email:n.props.currentUser.user.email||""},n}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props.alertMessage;return r.a.createElement("div",{style:{paddingTop:"10vh"},className:"row justify-content-center align-items-center"},r.a.createElement("div",{className:"col-12 col-lg-8 text-center"},e&&r.a.createElement("div",{className:"alert alert-".concat(e.type),role:"alert"},e.text),r.a.createElement("h1",{className:"mb-3"},"Reset password"),r.a.createElement("div",{style:{width:"40%",margin:"25px auto"}},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:this.handleChange,value:this.state.email,className:"form-control",type:"text",name:"email",placeholder:"Email",required:!0,autofocus:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block"},"Resset Password"))),r.a.createElement("hr",null),r.a.createElement(y.b,{className:"float-left",to:"/"},"Back Home"))))}}]),a}(r.a.Component),Se=function(e){Object(O.a)(a,e);var t=Object(U.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(se.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.password,r=t.password2;n.props.updatePassword({password:a,password2:r},n.props.match.params.token)},n.state={password:"",password2:""},n}return Object(j.a)(a,[{key:"render",value:function(){var e=this.state,t=e.password,a=e.password2,n=this.props.alertMessage;return r.a.createElement("div",{style:{paddingTop:"10vh"},className:"row justify-content-center align-content-center"},r.a.createElement("div",{className:"col-12 col-lg-8 text-center"},n&&r.a.createElement("div",{className:"alert alert-".concat(n.type),role:"alert"},n.text),r.a.createElement("h1",{className:"mb-3"},"Reset password"),r.a.createElement("div",{style:{width:"40%",margin:"25px auto"}},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:this.handleChange,value:t,className:"form-control",type:"password",name:"password",placeholder:"New Password",required:!0,autofocus:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:this.handleChange,value:a,className:"form-control",type:"password",name:"password2",placeholder:"Confirm Password",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block"},"Update Password"))),r.a.createElement("hr",null),r.a.createElement(y.b,{className:"float-left",to:"/"},"Back Home"))))}}]),a}(r.a.Component),Me=function(e){Object(O.a)(a,e);var t=Object(U.a)(a);function a(){var e;Object(N.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){t.preventDefault(),e.props.toggleSidemenu(!1)},e}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props,t=e.toggle,a=e.currentUser;return r.a.createElement("div",null,t&&r.a.createElement("div",{className:"sidemenu"},r.a.createElement("ul",null,r.a.createElement("li",{onClick:this.handleClick},r.a.createElement("i",{className:"fa fa-home","aria-hidden":"true"}),r.a.createElement(y.b,{to:"/"},"Home")),r.a.createElement("li",{onClick:this.handleClick},r.a.createElement("i",{className:"fa fa-cog","aria-hidden":"true"}),r.a.createElement(y.b,{to:"/settings"},"Settings")),r.a.createElement("li",{onClick:this.handleClick},r.a.createElement("i",{className:"fa fa-user","aria-hidden":"true"}),r.a.createElement(y.b,{to:"/users/".concat(a.user.username)},"View Profile")))))}}]),a}(r.a.Component),ke=a(91),Ce=a.n(ke),Re=(a(463),a(464),function(e){Object(O.a)(a,e);var t=Object(U.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).state={id:0},n}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.deleteNotification,n=t.currentUser,s=t.checkUserNotification,A=t.fetchFollowers;(0,t.getAllUsers)();var o=n.user.username;n.user.id&&(A(n.user.id),setInterval((function(){"chat"!==window.location.pathname.split("/")[1]&&s(o).then((function(){var t=e.props.notifications,n=t.from,s=e.state.id;if(t&&n&&0===s){var A=ke.store.addNotification({title:"".concat(n," want to connect!"),message:r.a.createElement(y.b,{onClick:function(){return a(o)},style:{color:"white"},to:"/chat/".concat(n)},"Click here to chat!"),type:"info",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:0,showIcon:!0},onRemoval:function(){a(o),e.setState({id:0})}});e.setState({id:A})}}))}),4e3))}},{key:"render",value:function(){var e=this.props,t=e.authUser,a=e.errors,n=e.removeError,s=e.currentUser,A=e.forgotPassword,o=e.updatePassword,c=e.toggle,l=e.toggleSidemenu;return r.a.createElement("div",null,s.isAuthenticated&&r.a.createElement(Me,{toggleSidemenu:l,toggle:c,currentUser:s}),r.a.createElement("div",{className:"container"},r.a.createElement(I.c,null,r.a.createElement(I.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(re,Object.assign({currentUser:s},e))}}),r.a.createElement(I.a,{exact:!0,path:"/signin",render:function(e){return r.a.createElement(oe,Object.assign({removeError:n,errors:a,onAuth:t,buttonText:"Log in",heading:"Welcome Back"},e))}}),r.a.createElement(I.a,{exact:!0,path:"/signup",render:function(e){return r.a.createElement(oe,Object.assign({removeError:n,errors:a,onAuth:t,signUp:!0,buttonText:"Sign up",heading:"Join Now"},e))}}),r.a.createElement(I.a,{exact:!0,path:"/forgot",render:function(e){return r.a.createElement(xe,Object.assign({currentUser:s,forgotPassword:A,alertMessage:a.message},e))}}),r.a.createElement(I.a,{exact:!0,path:"/reset/:token",render:function(e){return r.a.createElement(Se,Object.assign({updatePassword:o,alertMessage:a.message},e))}}),r.a.createElement(I.a,{exact:!0,path:"/users/:id/messages/new",component:le(ue)}),r.a.createElement(I.a,{exact:!0,path:"/users/:username",render:function(e){return r.a.createElement(he,Object.assign({currentUser:s},e))},key:window.location.pathname}),r.a.createElement(I.a,{exact:!0,path:"/chat/:username",component:le(je)}),r.a.createElement(I.a,{exact:!0,path:"/settings",component:le(Ue)}))))}}]),a}(r.a.Component));var Pe=Object(I.f)(Object(o.b)((function(e){return{currentUser:e.currentUser,errors:e.errors,notifications:e.notifications,toggle:e.toggleSidemenu.toggle}}),{authUser:function(e,t){return function(a){return new Promise((function(n,r){return R("post","/api/auth/".concat(e),t).then((function(e){var t=e.token,r=Object(M.a)(e,["token"]);localStorage.setItem("jwtToken",t),H(t),a(F(r)),a({type:"REMOVE_ERROR"}),n()})).catch((function(e){a(P(e.message)),r()}))}))}},updatePassword:function(e,t){return function(a){return new Promise((function(n,r){return R("put","/api/auth/reset/".concat(t),e).then((function(e){var t=e.message;a(P({text:t,type:"success"})),n()})).catch((function(e){a(P({text:e.message,type:"danger"})),r()}))}))}},removeError:T,checkUserNotification:function(e){return function(t){return R("get","/api/users/".concat(e,"/notification")).then((function(e){if(e[0])return t({type:"GET_NOTIFICATION",from:e[0].chatMessages.from})})).catch((function(e){return e}))}},deleteNotification:ce,fetchFollowers:function(e){return function(t){return R("get","/api/users/".concat(e,"/followers")).then((function(e){t(function(e){return{type:"SET_FOLLOWING",followers:e}}(e))})).catch((function(e){t(P(e))}))}},getAllUsers:function(){return function(e){return R("get","/api/users").then((function(t){e(function(e){return{type:"GET_ALL_USERS",users:e}}(t))})).catch((function(t){e(P(t))}))}},forgotPassword:function(e){return function(t){return R("post","/api/users/forgot",{email:e}).then((function(e){t(P({text:e.message,type:"success"}))})).catch((function(e){e.message&&t(P({text:e.message,type:"danger"}))}))}},toggleSidemenu:L})(Re)),Te=a(224),Fe=a.n(Te),He=Object(c.e)(v,Object(c.d)(Object(c.a)(w.a)));if(localStorage.jwtToken){H(localStorage.jwtToken);try{He.dispatch(F(Fe()(localStorage.jwtToken)))}catch(Le){He.dispatch(F({}))}}var De=function(){return r.a.createElement(o.a,{store:He},r.a.createElement(y.a,null,r.a.createElement("div",{className:"onboarding"},r.a.createElement(Ce.a,{isMobile:!0,className:"mt-md-4"}),r.a.createElement(z,null),r.a.createElement(Pe,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));A.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(De,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},85:function(e,t,a){}},[[227,1,2]]]);
//# sourceMappingURL=main.944626f9.chunk.js.map